<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6  ç³»åˆ— | hello world</title>
    <meta name="description" content="hjbji">
    <link rel="stylesheet" href="/yl/assets/style.c3210e46.css">
    <link rel="modulepreload" href="/yl/assets/app.a8623452.js">
    <link rel="modulepreload" href="/yl/assets/yl_learning.md.d3490df1.lean.js">
    
    <meta name="twitter:title" content="ES6  ç³»åˆ— | hello world">
  <meta property="og:title" content="ES6  ç³»åˆ— | hello world">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/yl/" aria-label="hello world, back to home" data-v-675d8756 data-v-cc01ef16><!----> hello world</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/yl/yl/learning" data-v-b8818f8c>å­¦ä¹ é—®é¢˜ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>å­¦ä¹ é—®é¢˜</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/yl/yl/learning" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>å­¦ä¹ é—®é¢˜</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/yl/yl/learning" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>å­¦ä¹ é—®é¢˜</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/yl/yl/learning" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>å­¦ä¹ é—®é¢˜</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/yl/yl/learning" data-v-b8818f8c>å­¦ä¹ é—®é¢˜ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>å­¦ä¹ é—®é¢˜</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/yl/yl/learning" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>å­¦ä¹ é—®é¢˜</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/yl/yl/learning" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>å­¦ä¹ é—®é¢˜</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/yl/yl/learning" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>å­¦ä¹ é—®é¢˜</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">learning</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/yl/yl/learning">ES6</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#å‡½æ•°çš„æ‰©å±•">å‡½æ•°çš„æ‰©å±•</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ç®­å¤´å‡½æ•°">ç®­å¤´å‡½æ•°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#function-prototype-tostring">Function.prototype.toString</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#catch-å‘½ä»¤çš„å‚æ•°çœç•¥">catch å‘½ä»¤çš„å‚æ•°çœç•¥</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ•°ç»„çš„æ‰©å±•">æ•°ç»„çš„æ‰©å±•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#object">Object</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#object-hasownproperties">Object.hasOwnProperties</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•">å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#padstart-padend">padStart &amp; padEnd</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#trimstart-trimend">trimStart &amp; trimEnd</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#includes-startswith-endswith">includes &amp; startsWith &amp; endsWith</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#set-map">Set &amp; Map</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#set-ç»“æ„">Set ç»“æ„</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#map-ç»“æ„">Map ç»“æ„</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-å¯¹è±¡">*Promise å¯¹è±¡</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-ç¼ºç‚¹">Promise ç¼ºç‚¹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-ç‰¹ç‚¹">Promise ç‰¹ç‚¹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-æ³¨æ„äº‹é¡¹">Promise æ³¨æ„äº‹é¡¹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-prototype-then">Promise.prototype.then</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-prototype-catch">Promise.prototype.catch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-prototype-finally">Promise.prototype.finally</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#promise-resolve">Promise.resolve</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-å¯¹è±¡">Reflect å¯¹è±¡</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#è®¾è®¡ç›®æ ‡">è®¾è®¡ç›®æ ‡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-get">Reflect.get</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-set">Reflect.set</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-has">Reflect.has</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-deleteproperty">Reflect.deleteProperty</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-constructor">Reflect.constructor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-getprototypeof">Reflect.getPrototypeOf</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-setprototypeof">Reflect.setPrototypeOf</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-apply">Reflect.apply</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-defineproperty">Reflect.defineProperty</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-getownpropertydescriptor">Reflect.getOwnPropertyDescriptor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-isextensible">Reflect.isExtensible</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-preventextension">Reflect.preventExtension</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reflect-ownkeys">Reflect.ownKeys</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#proxy">Proxy</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç”Ÿæˆå™¨-è¿­ä»£å™¨">ç”Ÿæˆå™¨ &amp; è¿­ä»£å™¨</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#for-of">for...of</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#generator-prototype-next">Generator.prototype.next()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#generator-prototype-throw">Generator.prototype.throw()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#generator-prototype-return">Generator.prototype.return()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#yield">yield*</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä½œä¸ºå¯¹è±¡å±æ€§çš„-generator-å‡½æ•°">ä½œä¸ºå¯¹è±¡å±æ€§çš„ Generator å‡½æ•°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#generator-å‡½æ•°çš„-this">Generator å‡½æ•°çš„ this</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å®é™…åº”ç”¨">å®é™…åº”ç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#generator-å¼‚æ­¥">Generator å¼‚æ­¥</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#class-ç±»">Class ç±»</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#getter-setter">getter &amp; setter</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#class-è¡¨è¾¾å¼">class è¡¨è¾¾å¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é™æ€æ–¹æ³•-é™æ€å±æ€§">é™æ€æ–¹æ³• &amp; é™æ€å±æ€§</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å®ä¾‹å±æ€§çš„æ–°å†™æ³•">å®ä¾‹å±æ€§çš„æ–°å†™æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#new-target">new.target</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#class-ç»§æ‰¿">Class ç»§æ‰¿</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#super">super</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#åŸå‹é“¾">åŸå‹é“¾</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç±»åˆå¹¶">ç±»åˆå¹¶</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#iterator">Iterator</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#éƒ¨ç½²è¿­ä»£å™¨æ¥å£">éƒ¨ç½²è¿­ä»£å™¨æ¥å£</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è¦†ç›–é»˜è®¤è¿­ä»£å™¨">è¦†ç›–é»˜è®¤è¿­ä»£å™¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#éå†å™¨å¯¹è±¡çš„-returnã€throw">éå†å™¨å¯¹è±¡çš„ returnã€throw</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#for-of-1">for...of</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#for-in">for...in</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#async-å‡½æ•°">async å‡½æ•°</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#await">await</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å†…éƒ¨å®ç°">å†…éƒ¨å®ç°</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#modules">Modules</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#export">export</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#import">import</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#export-default">export default</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#export-import-å¤åˆå†™æ³•">export &amp; import å¤åˆå†™æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è·¨æ¨¡å—å¸¸é‡">è·¨æ¨¡å—å¸¸é‡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#import-1">import()</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/yl/yl/">vue</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">larjdns</p><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="es6-ç³»åˆ—" tabindex="-1">ES6 ç³»åˆ— <a class="header-anchor" href="#es6-ç³»åˆ—" aria-hidden="true">#</a></h1><p><img src="/yl/1.jpg" alt=""></p><h2 id="å‡½æ•°çš„æ‰©å±•" tabindex="-1">å‡½æ•°çš„æ‰©å±• <a class="header-anchor" href="#å‡½æ•°çš„æ‰©å±•" aria-hidden="true">#</a></h2><ul><li><p>å‡½æ•°çš„ length å±æ€§æŒ‡çš„æ˜¯é¢„æœŸä¼ å…¥å‡½æ•°çš„å‚æ•°é•¿åº¦</p></li><li><p>å‰©ä½™å‚æ•°æœ«å°¾ä¸èƒ½æ¥å…¶ä»–å‚æ•°</p></li><li><p>bind è¿”å›çš„å‡½æ•°ï¼Œname å±æ€§å€¼ä¼šåŠ ä¸Š bound å‰ç¼€</p></li></ul><div class="language-js"><pre><code><span class="token comment">// æ‰€ä»¥åœ¨æ¨¡æ‹Ÿ bind æ–¹æ³•çš„æ—¶å€™è¿™ä¸ªå¯èƒ½æ˜¯æ¨¡æ‹Ÿä¸å‡ºæ¥çš„</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name <span class="token comment">// &quot;bound foo&quot;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name <span class="token comment">// &quot;bound &quot;</span>
</code></pre></div><h3 id="ç®­å¤´å‡½æ•°" tabindex="-1">ç®­å¤´å‡½æ•° <a class="header-anchor" href="#ç®­å¤´å‡½æ•°" aria-hidden="true">#</a></h3><p>ğŸ”‘ ç®­å¤´å‡½æ•°çš„ä½œç”¨æ˜¯ä½¿å¾—å›è°ƒå‡½æ•°çš„è¯­æ³•æ›´åŠ ç®€æ´</p><div class="language-js"><pre><code>arrayList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// æ›¿æ¢äº†</span>
arrayList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>â— æ™®é€šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘å‡½æ•°è¿è¡Œæ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œç®­å¤´å‡½æ•°çš„ this å°±æ˜¯ | å®šä¹‰æ—¶ä¸Šå±‚ä½œç”¨åŸŸ | æŒ‡å‘çš„ thisï¼Œä¹Ÿå°±æ˜¯è¯´ç®­å¤´å‡½æ•°çš„ this æ˜¯å›ºå®šçš„ï¼Œä¸å…è®¸é€šè¿‡å…¶ä»–ç±»ä¼¼ call / apply çš„æ–¹å¼è¿›è¡Œä¿®æ”¹ã€‚</p><div class="language-js"><pre><code><span class="token comment">// ES6</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;id:&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ES5</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;id:&#39;</span><span class="token punctuation">,</span> _this<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â— å¯¹è±¡ä¸æ„æˆä½œç”¨åŸŸä½¿å¾—æœ€åä¸‹é¢çš„ this æŒ‡å‘ window</p><div class="language-js"><pre><code><span class="token keyword">const</span> cat <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">lives</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
  <span class="token function-variable function">jumps</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>lives<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="function-prototype-tostring" tabindex="-1">Function.prototype.toString <a class="header-anchor" href="#function-prototype-tostring" aria-hidden="true">#</a></h3><p>ğŸ”‘ toString æ–¹æ³•ä¼šè¿”å›å‡½æ•°ä»£ç æœ¬èº«ï¼Œè€Œä¸”æ–°ç‰ˆæœ¬çš„å†…ç½®æ–¹æ³•ä¼šä¿ç•™å‡½æ•°çš„æ³¨é‡Š</p><h3 id="catch-å‘½ä»¤çš„å‚æ•°çœç•¥" tabindex="-1">catch å‘½ä»¤çš„å‚æ•°çœç•¥ <a class="header-anchor" href="#catch-å‘½ä»¤çš„å‚æ•°çœç•¥" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
<span class="token comment">// ä»¥å¾€æˆ‘ä»¬åœ¨å†™ try...catch çš„æ—¶å€™é€šå¸¸ä¼šè¿™æ ·å­å»å†™</span>
<span class="token comment">// ä½†å…¶å®å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ˜¯ä¸éœ€è¦ err ä¼ å‚çš„</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// æ‰€ä»¥åœ¨æ–°ç‰ˆä¸­æˆ‘ä»¬å¯ä»¥åƒä¸Šé¢ä¸€æ ·å»å†™</span>
</code></pre></div><h2 id="æ•°ç»„çš„æ‰©å±•" tabindex="-1">æ•°ç»„çš„æ‰©å±• <a class="header-anchor" href="#æ•°ç»„çš„æ‰©å±•" aria-hidden="true">#</a></h2><h2 id="object" tabindex="-1">Object <a class="header-anchor" href="#object" aria-hidden="true">#</a></h2><p>å¯¹è±¡ä¸€äº›æ–¹æ³•çš„é›†åˆ</p><h3 id="object-hasownproperties" tabindex="-1">Object.hasOwnProperties <a class="header-anchor" href="#object-hasownproperties" aria-hidden="true">#</a></h3><p>æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬Symbolå€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„.</p><h2 id="å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•" tabindex="-1">å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³• <a class="header-anchor" href="#å­—ç¬¦ä¸²çš„æ–°å¢æ–¹æ³•" aria-hidden="true">#</a></h2><h3 id="padstart-padend" tabindex="-1">padStart &amp; padEnd <a class="header-anchor" href="#padstart-padend" aria-hidden="true">#</a></h3><ul><li><p>å®ä¾‹æ–¹æ³•ï¼›ç”¨äºåœ¨å¤´éƒ¨è¡¥å…¨å­—ç¬¦ä¸²</p></li><li><p>å‚æ•°åˆ—è¡¨ï¼š</p></li></ul><p>â€‹ len - å­—ç¬¦ä¸²è¡¥å…¨ç”Ÿæˆçš„æœ€å¤§é•¿åº¦</p><p>â€‹ str - ç”¨äºè¡¥å…¨çš„å­—ç¬¦ä¸²</p><div class="language-js"><pre><code><span class="token comment">// æ¯”å¦‚åœ¨å¤§æ•°ç›¸åŠ ä¸­ ä¸¤ä¸ªæ•°çš„ä½æ•°ä¸ä¸€æ ·çš„æ—¶å€™éœ€è¦è¿›è¡Œå¤´éƒ¨è¡¥å…¨</span>
<span class="token keyword">function</span> <span class="token function">bigAdd</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">MAXL</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    a <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token constant">MAXL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    b <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token constant">MAXL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">// .......è¿›è¡Œä¸‹ä¸€æ­¥çš„ç´¯åŠ å¤„ç†</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¡¥å…¨çš„è§„åˆ™</p><ul><li>å¦‚æœåŸå­—ç¬¦ä¸²çš„é•¿åº¦å¤§äºç­‰äºæŒ‡å®šçš„é•¿åº¦ï¼Œè¿”å›åŸå­—ç¬¦ä¸²</li><li>å¦‚æœç”¨äºè¡¥å…¨çš„ str é•¿åº¦å’ŒåŸå­—ç¬¦ä¸²é•¿åº¦ç´¯åŠ å¤§äº lenï¼Œæˆªå–æ‰è¶…å‡ºé•¿åº¦çš„ éƒ¨åˆ† str å­—ç¬¦(å¡«æ»¡äº†å°±è¡Œçš„æ„æ€)</li></ul><hr><h3 id="trimstart-trimend" tabindex="-1">trimStart &amp; trimEnd <a class="header-anchor" href="#trimstart-trimend" aria-hidden="true">#</a></h3><ul><li><p>ä½œç”¨å’Œ trim æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¯´ç°åœ¨å°† trim åˆ†æˆäº†é¦–å°¾ä¸¤ç§ï¼Œå»é¦–å°±ç”¨</p><p>trimStartï¼Œå»å°¾å°±ç”¨ trimEndã€‚</p></li><li><p>@resultï¼šæ€»æ˜¯è¿”å›æ–°çš„å­—ç¬¦ä¸²</p></li><li><p>é™¤äº†ç©ºæ ¼é”®ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¯¹å­—ç¬¦ä¸²å¤´éƒ¨ï¼ˆæˆ–å°¾éƒ¨ï¼‰çš„ \tã€\nç­‰ä¸å¯è§çš„ç©ºç™½ç¬¦å·ä¹Ÿæœ‰æ•ˆ</p></li></ul><hr><h3 id="includes-startswith-endswith" tabindex="-1">includes &amp; startsWith &amp; endsWith <a class="header-anchor" href="#includes-startswith-endswith" aria-hidden="true">#</a></h3><p>æä¾›äº†ä¸‰ä¸ªæ–¹æ³•æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²</p><ul><li>includes : è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²</li><li>startsWithï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨</li><li>endsWithï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨</li></ul><div class="language-js"><pre><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&#39;Hello world!&#39;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&#39;Hello &#39;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true é’ˆå¯¹æ˜¯å‰ 6 ä¸ªå­—ç¬¦</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&#39;hello &#39;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false å¤§å°å†™æ•æ„Ÿ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true ä»ç¬¬7ä¸ªå­—ç¬¦ä¸²å¼€å§‹æ¯”è¾ƒ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39; world&#39;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h2 id="set-map" tabindex="-1">Set &amp; Map <a class="header-anchor" href="#set-map" aria-hidden="true">#</a></h2><p>ES6 å¼•å‡ºçš„æ–°çš„æ•°æ®ç»“æ„ï¼Œæœ¬è´¨ä¹Ÿæ˜¯ä¸ºäº†è¡¥å…… ES5 æ•°ç»„å¯¹è±¡ç­‰åœ¨ä½¿ç”¨åœºæ™¯ä¸Šæœ‰é™çš„é—®é¢˜ã€‚</p><h3 id="set-ç»“æ„" tabindex="-1">Set ç»“æ„ <a class="header-anchor" href="#set-ç»“æ„" aria-hidden="true">#</a></h3><p>set ä½œä¸ºé›†åˆçš„ä¸€ä¸ªæ¦‚å¿µï¼Œé‡Œé¢ä¸å­˜åœ¨ç›¸ç­‰çš„å…ƒç´ ã€‚å…¶å®æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨ ç±»ä¼¼JS çš„ === ç®—æ³•æ¥è¿›è¡Œåˆ¤æ–­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ -0 å’Œ +0 åœ¨ === æ˜¯ç›¸ç­‰çš„ï¼Œé‚£å°±ä¸ä¼šè¢«é‡æ–°æ·»åŠ åˆ°ç»“æ„ä¸­ã€‚</p><div class="language-js"><pre><code><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span> <span class="token comment">// JS è®¤ä¸ºè¿™ä¸ªæ˜¯ false</span>
</code></pre></div><p>â— éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹</p><ul><li><p>åœ¨ set ä¸­ NaN å’Œ NaN ä¸ä¼šé‡å¤</p></li><li><p>åœ¨ set ä¸­ null å’Œ null / undefined å’Œ undefinedä¸ä¼šé‡å¤</p></li><li><p>å¼•ç”¨ç±»å‹æ•°ç»„ï¼Œå¯¹è±¡ç­‰å¼•ç”¨ç±»å‹ä¼šå‡ºç°é‡å¤(å› ä¸ºå®ƒä»¬éƒ½æ˜¯ä¸åŒçš„å¼•ç”¨)</p></li></ul><h3 id="map-ç»“æ„" tabindex="-1">Map ç»“æ„ <a class="header-anchor" href="#map-ç»“æ„" aria-hidden="true">#</a></h3><h2 id="promise-å¯¹è±¡" tabindex="-1">*Promise å¯¹è±¡ <a class="header-anchor" href="#promise-å¯¹è±¡" aria-hidden="true">#</a></h2><p>ğŸ”‘ Promise æ˜¯ä¸€ç§å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†è§£å†³ä»¥å‰çš„å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p><h3 id="promise-ç¼ºç‚¹" tabindex="-1">Promise ç¼ºç‚¹ <a class="header-anchor" href="#promise-ç¼ºç‚¹" aria-hidden="true">#</a></h3><ul><li>æ— æ³•å–æ¶ˆï¼Œä¸€æ—¦æ–°å»ºå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆ</li><li>å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šååº”åˆ°å¤–éƒ¨</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token punctuation">(</span><span class="token string">&#39;Error&#39;</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// é‡Œé¢çš„è¿™ä¸ªé”™è¯¯å®Œå…¨è¢«åƒæ‰äº†ï¼Œå¯¹å¤–éƒ¨ä¸äº§ç”Ÿä»»ä½•çš„å½±å“</span>
<span class="token comment">// æœ¬è´¨ä¸Šå…¶å®æ˜¯ promise å†…éƒ¨è¿›è¡Œäº†ä¸€ä¸ª try...catch çš„å¤„ç†</span>
</code></pre></div><ul><li>å½“å¤„äº pending çŠ¶æ€çš„æ—¶å€™æ— æ³•å¾—å‡ºç›®å‰å¤„äºå“ªä¸€ä¸ªé˜¶æ®µ(åˆšå¼€å§‹/å³å°†å®Œæˆ???)</li></ul><h3 id="promise-ç‰¹ç‚¹" tabindex="-1">Promise ç‰¹ç‚¹ <a class="header-anchor" href="#promise-ç‰¹ç‚¹" aria-hidden="true">#</a></h3><ol><li>çŠ¶æ€å•ä¸€è½¬æ¢é€”å¾„ -- åªèƒ½ç”±å†…éƒ¨çš„ resolve å’Œ reject æ”¹å˜ï¼Œä¸å—å¤–ç•Œçš„å½±å“</li><li>çŠ¶æ€ä¸å¯é€† / ä¸å¯å˜ -- ä¸€æ—¦çŠ¶æ€ç”± pending å˜åˆ° resolve / reject å°±ä¸èƒ½å†æ¬¡æ”¹å˜</li></ol><h3 id="promise-æ³¨æ„äº‹é¡¹" tabindex="-1">Promise æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#promise-æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a></h3><ul><li>å½“è¿”å›ä¸€ä¸ª promise åçŠ¶æ€ç›´æ¥ä¾èµ–äºè¿”å›çš„ promise</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;fail&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// p2 çš„çŠ¶æ€ä¾èµ–äºp1 çš„çŠ¶æ€</span>
p2
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Error: fail</span>
</code></pre></div><ul><li>è°ƒç”¨ resolve æˆ– reject å¹¶ä¸ä¼šç»ˆç»“ Promise çš„å‚æ•°å‡½æ•°çš„æ‰§è¡Œï¼Œå¦‚ä¸‹ resolve äº†ä»¥ååé¢çš„ä»£ç éƒ½ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ä¿é™©åœ°æ¥è¯´æˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨ resolve ååŠ ä¸Š return ä¿è¯å½“å‰ promise å†…éƒ¨çš„æ‰§è¡Œå®Œæˆ</li></ul><div class="language-js"><pre><code><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2</span>
<span class="token comment">// 1</span>
</code></pre></div><h3 id="promise-prototype-then" tabindex="-1">Promise.prototype.then <a class="header-anchor" href="#promise-prototype-then" aria-hidden="true">#</a></h3><p>then æ–¹æ³•çš„ä½œç”¨æ˜¯ä¸º Promise æä¾›çŠ¶æ€å˜æ¢åçš„å›è°ƒæ‰§è¡Œã€‚è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œå¦‚æœ then å†…éƒ¨ return çš„æ˜¯ä¸€ä¸ªåŸºæœ¬å€¼çš„è¯ï¼Œæ–° Promise çš„çŠ¶æ€ä¼šç›´æ¥ resolveï¼›å¦‚æœ return çš„æ˜¯ä¸€ä¸ª Promiseï¼Œä¼šæ‰§è¡Œ Promise.then(resolve, reject) çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯çŠ¶æ€çš„å˜åŒ–å®Œå…¨ä¾èµ–äº return çš„ promiseã€‚</p><div class="language-js"><pre><code><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// hello</span>
    <span class="token keyword">return</span> <span class="token string">&#39;world&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// world</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;Sunday&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">// æ‰§è¡Œçš„æ—¶æœºä¾èµ–äºä¸Šä¸€ä¸ªthen è¿”å›çš„ promise</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 2000 ms åè¾“å‡º Sunday</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="promise-prototype-catch" tabindex="-1">Promise.prototype.catch <a class="header-anchor" href="#promise-prototype-catch" aria-hidden="true">#</a></h3><p>catch æ–¹æ³•å…¶å®æ˜¯ then(null, () =&gt; {}) çš„è¡¨ç°å½¢å¼ï¼Œä¹Ÿå°±æ˜¯åªæ•è·é”™è¯¯åæ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚é‡Œé¢æ¯”è¾ƒé‡è¦çš„æ˜¯ä¸€ä¸ªå« â€é”™è¯¯é€ä¼ â€œ çš„æ¦‚å¿µã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;err&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;suc1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// é€ä¼ </span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;suc2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//é€ä¼ </span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">reason</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// æ•è·</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;suc3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ä¼šæ‰§è¡Œä¸??? ä¼šçš„</span>
<span class="token comment">// ä¸ºå•¥??? å› ä¸º catch å…¶å®è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª promiseï¼Œæ‰§è¡Œå®ŒæˆçŠ¶æ€ä¹Ÿå°±ä¼šå˜æˆ fulfilled</span>
<span class="token comment">// Promise&lt;fulfilled&gt; undefined</span>
</code></pre></div><p>å…¶å®é€ä¼ å°±æ˜¯å¿½ç•¥æ‰ä¸­é—´ç»è¿‡çš„ then ç„¶åè¢«ç¬¬ä¸€ä¸ª catch æ•è·æ‰.</p><p>â— å…³äº promise å†…éƒ¨çš„é”™è¯¯å…¶å®è¿˜æ˜¯è›®æ€ªå¼‚çš„(è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰ generator ç”Ÿæˆå™¨æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„åŸå› ä¹‹ä¸€) -- promise å†…éƒ¨ä¼šåƒæ‰é”™è¯¯</p><div class="language-js"><pre><code><span class="token comment">// å®˜ç½‘çš„ä¸€ä¸ªä¾‹å­</span>
<span class="token keyword">const</span> <span class="token function-variable function">someAsyncThing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">someAsyncThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;everything is great&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Uncaught (in promise) ReferenceError: x is not defined</span>
<span class="token comment">// 123</span>
</code></pre></div><p>ä½†æ˜¯åœ¨ node å’Œåœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„ç»“æœä¸ä¸€è‡´ï¼Œä¸ºå•¥å‘¢ï¼Ÿnode é‡Œé¢å…¶å®æ˜¯åšäº†è¿™ä¹ˆä¸€ä¸ªé™åˆ¶ï¼Œä¹Ÿå°±æ˜¯å¦‚æœ promise å†…éƒ¨æœ‰æœªæ•è·çš„é”™è¯¯ä¼šç›´æ¥ç»ˆæ­¢è¿›ç¨‹(æœ¬åœ°çš„ node ç‰ˆæœ¬æ˜¯ V16.13.1 å¯èƒ½åœ¨ä½ç‰ˆæœ¬ä¸­å¹¶ä¸ä¼šå­˜åœ¨è¿™æ ·çš„é™åˆ¶)</p><h3 id="promise-prototype-finally" tabindex="-1">Promise.prototype.finally <a class="header-anchor" href="#promise-prototype-finally" aria-hidden="true">#</a></h3><p>å‚æ•°: callback() ä¸æ¥å—ä»»ä½•å‚æ•°</p><ul><li><p>finally ç­‰ä»·äº then(callback, callback)ï¼Œä¹Ÿå°±æ˜¯æ— è®º promise çš„çŠ¶æ€å¦‚ä½•æ”¹å˜éƒ½æ˜¯ä¼šæ‰§è¡Œä¼ å…¥çš„callback å‡½æ•°ã€‚</p></li><li><p>finally è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª promise å¯¹è±¡</p><div class="language-js"><pre><code><span class="token comment">// finall</span>
<span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">finally</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">P</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constructor
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    	<span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">P</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> val<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">P</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> reason <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><h3 id="promise-resolve" tabindex="-1">Promise.resolve <a class="header-anchor" href="#promise-resolve" aria-hidden="true">#</a></h3><p>æ–¹æ³•æ˜¯å°†ä¸€ä¸ªå‚æ•°å°è£…ä¸º promise ç‹¬äº«è¿”å›çš„è¿‡ç¨‹ã€‚</p><div class="language-js"><pre><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// ç­‰ä»·äº</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>â— éœ€è¦ç‰¹åˆ«æ³¨æ„ resolve çš„å‚æ•°ä¼ é€’ç±»å‹</p><ol><li>å‚æ•°æ˜¯ Promise å®ä¾‹</li></ol><p>â€‹ å¦‚æœå‚æ•°æ˜¯ Promise å®ä¾‹ï¼Œé‚£ä¹ˆPromise.resolveå°†ä¸åšä»»ä½•ä¿®æ”¹ã€åŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå®ä¾‹ã€‚</p><ol start="2"><li>å‚æ•°æ˜¯ thenable å¯¹è±¡</li></ol><div class="language-js"><pre><code><span class="token comment">// å…·å¤‡ then æ–¹æ³•çš„å¯¹è±¡</span>
<span class="token keyword">let</span> thenable <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">then</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Promise.resolve()æ–¹æ³•ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ï¼Œç„¶åå°±ç«‹å³æ‰§è¡Œthenableå¯¹è±¡çš„then()æ–¹æ³•ã€‚</p><ol start="3"><li>å‚æ•°ä¸æ˜¯å…·å¤‡ then() æ–¹æ³•çš„å¯¹è±¡ï¼Œæˆ–æ ¹æœ¬ä¸æ˜¯å¯¹è±¡</li></ol><p>â€‹ è¿”å›ä¸€ä¸ªæ–°çš„ promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º resolveï¼Œä¼ é€’çš„å€¼å°±æ˜¯ Promise.resolve å‡ºå»çš„å€¼</p><div class="language-js"><pre><code><span class="token keyword">const</span> promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token comment">/*
	promise çš„æ•°æ®ç±»å‹ Promise&lt;fulfilled&gt; å€¼æ˜¯ &#39;hello&#39;
*/</span>
</code></pre></div><ol start="4"><li>å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°</li></ol><p>â€‹ ä¼šå…ˆæ‰§è¡Œå‡½æ•°ï¼Œç„¶åå°†å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºæ–° promise å¯¹è±¡çš„å€¼</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;jzy&#39;</span>
    <span class="token comment">// æ²¡æœ‰å°±æ˜¯è¿”å› undefined</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// jzy || undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="reflect-å¯¹è±¡" tabindex="-1">Reflect å¯¹è±¡ <a class="header-anchor" href="#reflect-å¯¹è±¡" aria-hidden="true">#</a></h2><p>Reflect æ˜¯ ES6 å¼•å‡ºç”¨æ¥æ“ä½œå¯¹è±¡çš„ APIã€‚</p><p>å…³é”®å­—ï¼šå¯¹è±¡ç›¸åŒè¡Œä¸ºï¼›å‡½æ•°å¼ç¼–ç¨‹</p><h3 id="è®¾è®¡ç›®æ ‡" tabindex="-1">è®¾è®¡ç›®æ ‡ <a class="header-anchor" href="#è®¾è®¡ç›®æ ‡" aria-hidden="true">#</a></h3><ul><li>æŠ½å– Object å¯¹è±¡å†…ä¸€äº›å†…éƒ¨æ–¹æ³•</li><li>ä¿®æ”¹æŸäº› Object æ–¹æ³•çš„è¿”å›ç»“æœä½¿å…¶å˜å¾—æ›´åˆç†</li><li>è®© Object æ“ä½œå˜æˆå‡½æ•°å¼è¡Œä¸º</li><li>æä¾›ä¸ proxy ä¸€è‡´çš„å‡½æ•°ç­¾å</li></ul><h3 id="reflect-get" tabindex="-1">Reflect.get <a class="header-anchor" href="#reflect-get" aria-hidden="true">#</a></h3><p>Reflect.get(target, name, receiver)</p><ul><li>è¿”å› target å¯¹è±¡çš„ name å±æ€§</li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bar<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> tar <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">4</span>
<span class="token punctuation">}</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>myObject<span class="token punctuation">,</span> <span class="token string">&#39;baz&#39;</span><span class="token punctuation">,</span> tar<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 7</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>myObject<span class="token punctuation">,</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> tar<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> tar<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// TypeError: Reflect.get called on non-object</span>
</code></pre></div><p>â­ æœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹</p><ul><li>å¦‚æœ target ä¼ å…¥çš„æ˜¯éå¯¹è±¡ï¼Œä¼šæŠ¥é”™</li><li>name éƒ¨ç½²äº† get æ–¹æ³•ä¸”åœ¨å­˜åœ¨ receiver çš„æƒ…å†µä¸‹ ---&gt; get æ–¹æ³•çš„ this ä¼šæŒ‡å‘ receiver</li></ul><h3 id="reflect-set" tabindex="-1">Reflect.set <a class="header-anchor" href="#reflect-set" aria-hidden="true">#</a></h3><p>Reflect.set(target, name, value, receiver)</p><ul><li>è®¾ç½® target å±æ€§çš„ name ç­‰äº value</li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> myReceiverObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ä¼ å…¥ receiverï¼Œset æ–¹æ³•çš„ this æŒ‡å‘çš„å°±æ˜¯ myReceiverObject</span>
<span class="token comment">// å¯¹ this.foo çš„ä¿®æ”¹å…¶å®å°±æ˜¯å¯¹ myReceiverObject.foo çš„ä¿®æ”¹</span>
Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>myObject<span class="token punctuation">,</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> myReceiverObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
myObject<span class="token punctuation">.</span>foo <span class="token comment">// 4</span>
myReceiverObject<span class="token punctuation">.</span>foo <span class="token comment">// 1</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// target æŒ‡çš„æ˜¯ç»‘å®šä»£ç†çš„ç›®æ ‡ä¹Ÿå°±æ˜¯ p</span>
    <span class="token comment">// receiver æŒ‡çš„æ˜¯ proxy å®ä¾‹ä¹Ÿå°±æ˜¯ ooo</span>
    <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> ooo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>â­ æœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹(ä¸ get æ˜¯ç±»ä¼¼çš„)</p><ul><li>å¦‚æœ target ä¼ å…¥çš„æ˜¯éå¯¹è±¡ï¼Œä¼šæŠ¥é”™</li><li>name éƒ¨ç½²äº† setæ–¹æ³•ä¸”åœ¨å­˜åœ¨ receiver çš„æƒ…å†µä¸‹ ---&gt; set æ–¹æ³•çš„ this ä¼šæŒ‡å‘ receiver</li></ul><h3 id="reflect-has" tabindex="-1">Reflect.has <a class="header-anchor" href="#reflect-has" aria-hidden="true">#</a></h3><p>Reflect.has(obj, name)</p><div class="language-js"><pre><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">}</span>
<span class="token comment">// &#39;foo&#39; in obj === Reflect.has(obj, &#39;foo&#39;)</span>
</code></pre></div><h3 id="reflect-deleteproperty" tabindex="-1">Reflect.deleteProperty <a class="header-anchor" href="#reflect-deleteproperty" aria-hidden="true">#</a></h3><p>Reflect.deleteProperty(obj, name)</p><div class="language-js"><pre><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>
<span class="token comment">// delete obj.foo === Reflect.deleteProperty(obj, &#39;foo&#39;)</span>
</code></pre></div><h3 id="reflect-constructor" tabindex="-1">Reflect.constructor <a class="header-anchor" href="#reflect-constructor" aria-hidden="true">#</a></h3><p>Reflect.constructor(function, args)</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token comment">// const p = new Person(&#39;name&#39;)</span>
<span class="token comment">// const p = Reflect.construct(Person, [&#39;name&#39;, &#39;age&#39;])</span>
</code></pre></div><p>â­éœ€è¦æ³¨æ„ä¸¤ç‚¹</p><ul><li>function ä¼ å…¥çš„å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°(å› ä¸ºæ˜¯ new è¡Œä¸º)</li><li>args ä¼ å…¥çš„å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„å‚æ•°</li></ul><h3 id="reflect-getprototypeof" tabindex="-1">Reflect.getPrototypeOf <a class="header-anchor" href="#reflect-getprototypeof" aria-hidden="true">#</a></h3><p>Reflect.getPrototypeOf(obj) - è¯»å–å¯¹è±¡çš„ <em><em>proto</em>_</em> å±æ€§</p><div class="language-js"><pre><code><span class="token keyword">const</span> myObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FancyThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ—§å†™æ³•</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>myObj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">FancyThing</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

<span class="token comment">// æ–°å†™æ³•</span>
Reflect<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>myObj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">FancyThing</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
</code></pre></div><p>â­ä¼ å…¥çš„ obj å¿…é¡»ä¸º Object å¯¹è±¡ å¦åˆ™ä¼šæŠ¥é”™</p><h3 id="reflect-setprototypeof" tabindex="-1">Reflect.setPrototypeOf <a class="header-anchor" href="#reflect-setprototypeof" aria-hidden="true">#</a></h3><p>Reflect.setPrototypeOf(obj, newProto)</p><ul><li>è®¾ç½®å¯¹è±¡çš„ _<em>proto_</em> å±æ€§</li></ul><div class="language-js"><pre><code>Reflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
Reflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
Reflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// TypeError</span>
Reflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// TypeError</span>
Reflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// TypeError</span>
</code></pre></div><p>â­ éœ€è¦æ³¨æ„ä¸¤ç‚¹</p><ul><li>obj ä¼ å…¥çš„å¿…é¡»æ˜¯ Object å¯¹è±¡</li><li>newProto å¿…é¡»æ˜¯ null æˆ–è€… Object å¯¹è±¡</li></ul><h3 id="reflect-apply" tabindex="-1">Reflect.apply <a class="header-anchor" href="#reflect-apply" aria-hidden="true">#</a></h3><p>Reflect.apply(func, thisArg, args)</p><ul><li>ç»‘å®š thisArg åä¼ å…¥ args æ‰§è¡Œ funcå‡½æ•°</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> ages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> youngest <span class="token operator">=</span> <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span>min<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> ages<span class="token punctuation">)</span>
<span class="token comment">// const youngest = Math.min(...ages) // ä¸ä½¿ç”¨ applyä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼çš„æ–¹å¼</span>
<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>youngest<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>youngest<span class="token punctuation">)</span> <span class="token comment">// 11</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>  <span class="token comment">// [object Number]</span>
</code></pre></div><p>â­éœ€è¦æ³¨æ„</p><ul><li>func ä¼ å…¥çš„å¿…é¡»æ˜¯ Function</li></ul><h3 id="reflect-defineproperty" tabindex="-1">Reflect.defineProperty <a class="header-anchor" href="#reflect-defineproperty" aria-hidden="true">#</a></h3><p>Reflect.defineProperty(target, propertyKey, attributes)</p><ul><li>ç­‰åŒäº Object.definePropertyï¼Œç”¨äºå®šä¹‰æŸä¸ªå±æ€§çš„ configurable, enumerable, writable, value, get, setç­‰ï¼Œæœªæ¥ä¼šæ›¿ä»£ Object.defineProperty</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;set&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">;</span> <span class="token comment">// {value: &quot;bar&quot;, writable: true, enumerable: true, configurable: true}</span>
</code></pre></div><p>â­ set å’Œ defineProperty çš„è§¦å‘åœºæ™¯</p><ul><li>å¦‚æœè®¾ç½®äº† set æ–¹æ³•ä¸” Reflect.set ä¸ä¼ å…¥ receiver åˆ™ä¸ä¼šè§¦å‘ defineProperty</li><li>Reflect.setä¸€æ—¦ä¼ å…¥receiverï¼Œå°±ä¼šå°†å±æ€§èµ‹å€¼åˆ°receiverä¸Šé¢ï¼Œå¯¼è‡´è§¦å‘definePropertyæ‹¦æˆª</li></ul><h3 id="reflect-getownpropertydescriptor" tabindex="-1">Reflect.getOwnPropertyDescriptor <a class="header-anchor" href="#reflect-getownpropertydescriptor" aria-hidden="true">#</a></h3><p>Reflect.getOwnPropertyDescriptor(target, propertyKey)</p><ul><li>è·å–å¯¹è±¡çš„ descriptor</li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>myObject<span class="token punctuation">,</span> <span class="token string">&#39;hidden&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>myObject<span class="token punctuation">,</span> <span class="token string">&#39;hidden&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//  {&quot;value&quot;:true,&quot;writable&quot;:false,&quot;enumerable&quot;:false,&quot;configurable&quot;:false}</span>
</code></pre></div><p>ğŸ”‘é€šè¿‡ä¸Šé¢çš„è¾“å‡ºæˆ‘ä»¬å¯ä»¥çŸ¥é“é»˜è®¤çš„ descriptor</p><div class="language-js"><pre><code><span class="token punctuation">{</span><span class="token string-property property">&quot;writable&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string-property property">&quot;enumerable&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string-property property">&quot;configurable&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span> 
</code></pre></div><h3 id="reflect-isextensible" tabindex="-1">Reflect.isExtensible <a class="header-anchor" href="#reflect-isextensible" aria-hidden="true">#</a></h3><p>Reflect.isExtensible (target)</p><ul><li>è¿”å› boolean è¡¨ç¤º target æ˜¯å¦å¯æ‰©å±•</li></ul><h3 id="reflect-preventextension" tabindex="-1">Reflect.preventExtension <a class="header-anchor" href="#reflect-preventextension" aria-hidden="true">#</a></h3><p>Reflect.preventExtension(target)</p><ul><li>ä½¿å¾— target ä¸å¯æ‰©å±•(ä¸å¯æ–°å¢å±æ€§ / å¯ä»¥ get å’Œ delete)</li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Reflect<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span> <span class="token comment">// true</span>

myObject<span class="token punctuation">.</span>hello <span class="token operator">=</span> <span class="token string">&#39;hahah&#39;</span> <span class="token comment">// ä¸æŠ¥é”™ä½†æ˜¯ä¸ç”Ÿæ•ˆ</span>
</code></pre></div><h3 id="reflect-ownkeys" tabindex="-1">Reflect.ownKeys <a class="header-anchor" href="#reflect-ownkeys" aria-hidden="true">#</a></h3><p>Reflect.ownKeys (target)</p><ul><li>è¿”å›å¯¹è±¡æ‰€æœ‰çš„å±æ€§</li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;baz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;bing&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// æ—§å†™æ³•</span>
Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span>
<span class="token comment">// [&#39;foo&#39;, &#39;bar&#39;]</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span>
<span class="token comment">//[Symbol(baz), Symbol(bing)]</span>

<span class="token comment">// æ–°å†™æ³• -- ç­‰åŒäºä¸Šé¢ä¸¤ä¸ªä¹‹å’Œ</span>
Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span>
<span class="token comment">// [&#39;foo&#39;, &#39;bar&#39;, Symbol(baz), Symbol(bing)]</span>
</code></pre></div><h2 id="proxy" tabindex="-1">Proxy <a class="header-anchor" href="#proxy" aria-hidden="true">#</a></h2><ul><li>[x] é‡æ–°å­¦ä¹ çš„ç›®æ ‡æ˜¯ææ¸…æ¥š proxy å®ä¾‹ å’Œ target çš„åŒºåˆ«</li></ul><ul><li>é‡Œé¢çš„ä¸€äº›æ–¹æ³•å’Œ Reflect æ˜¯ä¸€æ ·çš„ï¼Œå‚æ•°ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥è¿™ä¹ˆå»ç†è§£ï¼Œproxy æ˜¯ä¸€ä¸ªä»£ç†å™¨ï¼Œå½“æˆ‘ä»¬è§¦å‘ proxy çš„ä¸€äº›æ‹¦æˆªçš„è¯ä¼šä½¿ç”¨ Reflect æ¥æ›´æ–°å¯¹è±¡ã€‚</li></ul><p>â­ ç›‘å¬ä»¥ä¸‹çš„ä¸€äº›æ–¹æ³•è®¾ç½®</p><ul><li>get</li><li>set</li><li>has</li><li>deleteProerty</li><li>constructor</li><li>getPrototypeOf</li><li>setPrototypeOf</li><li>apply</li><li>defineProperty</li><li>getOwnProtertyDescriptor</li><li>isExtensible</li><li>preventExtension</li><li>ownKeys</li></ul><h2 id="ç”Ÿæˆå™¨-è¿­ä»£å™¨" tabindex="-1">ç”Ÿæˆå™¨ &amp; è¿­ä»£å™¨ <a class="header-anchor" href="#ç”Ÿæˆå™¨-è¿­ä»£å™¨" aria-hidden="true">#</a></h2><ul><li>è°ƒç”¨ Generator å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä»£è¡¨ Generator å‡½æ•°å†…éƒ¨æŒ‡é’ˆã€‚ä»¥åæ¯æ¬¡è°ƒç”¨éå†å™¨çš„ next æ–¹æ³•ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæœ‰ç€ value å’Œ done ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚</li><li>value - yield è¡¨è¾¾å¼åé¢çš„å€¼</li><li>done - ä»£è¡¨éå†æ˜¯å¦ç»“æŸ</li></ul><p>â­ æœ¬è´¨ä¸Šï¼Œgenerator æ˜¯åŸºäºåç¨‹æ¥å®ç°çš„ï¼Œæ‰€æœ‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨æ‰ä¼šæœ‰çŠ¶æ€è¿™ä¸ªæ¦‚å¿µã€‚åç¨‹æ˜¯ä¸å—æ“ä½œç³»ç»Ÿæ§åˆ¶çš„ï¼Œå•çº¯ç”±ç”¨æˆ·æ§åˆ¶(æ¯”å¦‚ç”Ÿæˆå™¨çš„ next æ–¹æ³•)ï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€çš„è½¬æ¢ã€‚</p><h3 id="for-of" tabindex="-1">for...of <a class="header-anchor" href="#for-of" aria-hidden="true">#</a></h3><p>for...of å¾ªç¯å¯ä»¥è‡ªåŠ¨éå† Generator å‡½æ•°è¿è¡Œæ—¶ç”Ÿæˆçš„ Interator å¯¹è±¡ï¼Œä¸”ä¸éœ€è¦å†è°ƒç”¨ next æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬ä¹Ÿéƒ½çŸ¥é“å¯¹è±¡å…¶å®æ˜¯ä¸å¯ä»¥ä½¿ç”¨ for...of å»éå†çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨æ¥å¯¹å¯¹è±¡è¿›è¡Œæ”¹é€ </p><div class="language-js"><pre><code><span class="token comment">// ç¬¬ä¸€ç§æ–¹æ³•</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">objectEntries</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Reflect.ownkeys æ‹¿åˆ°å¯¹è±¡æ‰€æœ‰çš„é”®å€¼åŒ…æ‹¬ symbol</span>
  <span class="token keyword">let</span> propKeys <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
    <span class="token comment">// éå†å¯¹è±¡çš„å±æ€§ç„¶åé€šè¿‡ yield å»æ“ä½œ</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> propKey <span class="token keyword">of</span> propKeys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token punctuation">[</span>propKey<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>propKey<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> jane <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">first</span><span class="token operator">:</span> <span class="token string">&#39;Jane&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">last</span><span class="token operator">:</span> <span class="token string">&#39;Doe&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> <span class="token function">objectEntries</span><span class="token punctuation">(</span>jane<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token comment">// ç¬¬äºŒç§æ–¹æ³•ï¼šå¯¹è±¡å†…éƒ¨æ–°å¢ [Symbol.interator]: function* (){}</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">objectEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> propKeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> propKey <span class="token keyword">of</span> propKeys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token punctuation">[</span>propKey<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>propKey<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> jane <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">first</span><span class="token operator">:</span> <span class="token string">&#39;Jane&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">last</span><span class="token operator">:</span> <span class="token string">&#39;Doe&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

jane<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> objectEntries<span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> jane<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â­ éœ€è¦æ¸…æ¥šçš„ä¸€ç‚¹æ˜¯ï¼Œæ— è®ºæ˜¯ for...of / æ‰©å±•è¿ç®—ç¬¦ / Array.from éƒ½æ˜¯å¯ä»¥å°† Generator è¿”å›çš„ interator ä½œä¸ºå‚æ•°ï¼Œä½†æ˜¯é‡åˆ° done ä¸º true çš„è¯å°±ä¼šé©¬ä¸Šåœæ­¢éå†ã€‚</p><h3 id="generator-prototype-next" tabindex="-1">Generator.prototype.next() <a class="header-anchor" href="#generator-prototype-next" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token comment">// é‡‡ç”¨ç”Ÿæˆå™¨å®ç°å»¶æ—¶æ‰§è¡Œå‡½æ•°çš„æ•ˆæœ</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ‰§è¡Œäº†ï¼&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> generator <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript"><pre><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">dataConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Started&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">1 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">yield</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">2 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">yield</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> genObj <span class="token operator">=</span> <span class="token function">dataConsumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
genObj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// started</span>
genObj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 1 a</span>
genObj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 2 b</span>
</code></pre></div><ul><li>[x] 2022 / 4 / 11 é˜…è¯»åˆ° next ä¼ é€’å‡½æ•°</li></ul><h3 id="generator-prototype-throw" tabindex="-1">Generator.prototype.throw() <a class="header-anchor" href="#generator-prototype-throw" aria-hidden="true">#</a></h3><ul><li>æ‰§è¡Œä¸€æ¬¡ throw é™„å¸¦æ‰§è¡Œä¸€æ¬¡ next</li><li>åªæœ‰æ‰§è¡Œè¿‡ä¸€æ¬¡ nextï¼Œthrow ä¼ é€’çš„é”™è¯¯æ‰èƒ½è¢«å†…éƒ¨æ•è·</li></ul><div class="language-js"><pre><code><span class="token keyword">var</span> <span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å‡½æ•°ä½“å†…ï¼š&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
i<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">&#39;å‡ºé”™äº†~~~~&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è¿›å…¥å‡½æ•°ä½“å†…é”™è¯¯æ•è·</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    i<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">&#39;å‡ºé”™äº†~~~~~&#39;</span><span class="token punctuation">)</span> <span class="token comment">// è¿›å…¥å‡½æ•°ä½“å¤–é”™è¯¯æ•è·</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å‡½æ•°ä½“å¤–ï¼š&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â­åŒºåˆ«äºå…¨å±€ä¸Šçš„ throw å‡½æ•°ï¼Œthrow åªèƒ½è¢«å‡½æ•°ä½“å¤–çš„ catch è¯­å¥æ•è·ã€‚åŒæ—¶ä¸å…¶ä»–é”™è¯¯ç±»ä¼¼ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œæ­£ç¡®çš„é”™è¯¯å¤„ç†æµç¨‹ï¼Œç¨‹åºå°†ä¼šæŠ¥é”™(ä¹Ÿå°±æ˜¯ throw äº†ä½†æ˜¯ä½ æ²¡æœ‰ä½¿ç”¨ try ... catch è¿›è¡Œé”™è¯¯å¤„ç†)</p><h3 id="generator-prototype-return" tabindex="-1">Generator.prototype.return() <a class="header-anchor" href="#generator-prototype-return" aria-hidden="true">#</a></h3><p>Generator å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œè¿˜æœ‰ä¸€ä¸ª return æ–¹æ³•ï¼Œå¯ä»¥è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ä¸”ç»ˆç»“éå† Generator å‡½æ•°ã€‚</p><div class="language-js"><pre><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// { value: 1, done: false }</span>
g<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span> <span class="token comment">// { value: &quot;foo&quot;, done: true }</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// { value: undefined, done: true }</span>
</code></pre></div><h3 id="yield" tabindex="-1">yield* <a class="header-anchor" href="#yield" aria-hidden="true">#</a></h3><p>å¸¸ç”¨åœ¨ä¸€ä¸ª Generator å‡½æ•°å†…éƒ¨è°ƒç”¨å¦å¤–ä¸€ä¸ª Generator çš„æƒ…å†µã€‚yield* è¡¨ç¤ºåé¢æ¥ç€çš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚</p><p>ğŸŒŸå¯ä»¥è¿™ä¹ˆå»ç†è§£ï¼šyield* è¡¨è¾¾å¼å…¶å®å°±æ˜¯å°† Generator è½¬åŒ–ä¸º å¤šä¸ª yield å­è¡¨è¾¾å¼çš„è¿‡ç¨‹ï¼Œç„¶ååœ¨çˆ¶ Generator å†éå†çš„è¿‡ç¨‹ã€‚</p><div class="language-js"><pre><code><span class="token comment">// å¦‚æœè¢«ä»£ç†çš„ Generator å‡½æ•°æœ‰returnè¯­å¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‘ä»£ç†å®ƒçš„ Generator å‡½æ•°è¿”å›æ•°æ®</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¥å— foo è¿”å›çš„æ•°æ®</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;v: &quot;</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> it <span class="token operator">=</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// {value: 1, done: false}</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// {value: 2, done: false}</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// {value: 3, done: false}</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;v: foo&quot;</span>
<span class="token comment">// {value: 4, done: false}</span>
it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div><ul><li>ä½¿ç”¨ yield å®ç°æ•°ç»„çš„ flat æ‰å¹³åŒ–</li></ul><div class="language-js"><pre><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">iterTree</span><span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tree<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">iterTree</span><span class="token punctuation">(</span>tree<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> tree<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> tree <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;e&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token keyword">of</span> <span class="token function">iterTree</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä½œä¸ºå¯¹è±¡å±æ€§çš„-generator-å‡½æ•°" tabindex="-1">ä½œä¸ºå¯¹è±¡å±æ€§çš„ Generator å‡½æ•° <a class="header-anchor" href="#ä½œä¸ºå¯¹è±¡å±æ€§çš„-generator-å‡½æ•°" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// å‰é¢ä½¿ç”¨ * æ ‡è¯†æ˜¯ Generator å‡½æ•°</span>
    <span class="token operator">*</span><span class="token function">myGeneratorMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="generator-å‡½æ•°çš„-this" tabindex="-1">Generator å‡½æ•°çš„ this <a class="header-anchor" href="#generator-å‡½æ•°çš„-this" aria-hidden="true">#</a></h3><ul><li><p>Generator ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ä½¿ç”¨</p></li><li><p>Generator åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•å¯ä»¥è¢«ç»§æ‰¿</p></li></ul><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">yield</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// é€šè¿‡å°è£…å‡½æ•°çš„æ–¹å¼ä½¿å¾— Generator çŠ¶æ€æœºå¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">gen</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>a<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>b<span class="token punctuation">)</span>
</code></pre></div><h3 id="å®é™…åº”ç”¨" tabindex="-1">å®é™…åº”ç”¨ <a class="header-anchor" href="#å®é™…åº”ç”¨" aria-hidden="true">#</a></h3><ul><li>å¼‚æ­¥æ“ä½œåŒæ­¥åŒ–è¡¨è¾¾</li></ul><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">loadingData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åŠ è½½åŠ¨ç”»</span>
    <span class="token keyword">yield</span> <span class="token function">renderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ¸²æŸ“æ•°æ®</span>
    <span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// éšè—åŠ è½½åŠ¨ç”»</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ä¸€å¼€å§‹ä¸ä¼šæ‰§è¡Œ</span>
g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ‰§è¡Œåˆ° renderData</span>
<span class="token comment">// renderData é‡Œé¢å†è°ƒç”¨ g.next() ä»è€Œéšè—åŠ è½½åŠ¨ç”»</span>
</code></pre></div><ul><li>éƒ¨ç½² Interator æ¥å£</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">setUpInterator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ–¹æ³•ä¸€å°±æ˜¯é€šè¿‡å¾€å¯¹è±¡ä¸Šæ·»åŠ  Symbol.inerator å±æ€§æ¥å®ç°å¯è¿­ä»£</span>
    obj<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">yield</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>â­ æ€»çš„æ¥è¯´ï¼Œgenerator ä½œä¸ºç”Ÿæˆå™¨å‡½æ•°ï¼Œä¸åƒæ™®é€šå‡½æ•°è°ƒç”¨åå°±æ‰§è¡Œã€‚è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ for ... of æ¥è¿›è¡Œè¿­ä»£ã€‚å†…éƒ¨é€šè¿‡ yield å…³é”®å­—æ¥å®ç°çŠ¶æ€æœºçš„åˆ‡æ¢ï¼Œæ¯ next ä¸€æ¬¡æ‰§è¡Œåˆ° yield çš„æ—¶å€™å°±äº¤å‡ºå¯¹åº”çš„æ‰§è¡Œæƒé™ï¼Œå¯¹åº”çš„ä¸Šä¸‹æ–‡ä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œç­‰åˆ°ä¸‹æ¬¡å–åˆ°çŠ¶æ€æ‰§è¡Œæƒåå†å…¥æ ˆ</p><h3 id="generator-å¼‚æ­¥" tabindex="-1">Generator å¼‚æ­¥ <a class="header-anchor" href="#generator-å¼‚æ­¥" aria-hidden="true">#</a></h3><p>â— ES6 å¼•å…¥ Generator ä¹‹å‰ä¹Ÿæœ‰å‡ ç§æ–¹æ³•è§£å†³JSåŒæ­¥é˜»å¡çš„é—®é¢˜ï¼Œå¸¸è§çš„æœ‰å›è°ƒå‡½æ•° / Promiseã€‚å›è°ƒå‡½æ•°å¯èƒ½å‡ºç°çš„é—®é¢˜æ˜¯å¤šä¸ªå›è°ƒä¹‹é—´å­˜åœ¨å¼ºè€¦åˆå…³ç³»å¯¼è‡´ä¸€ä¸ªæ“ä½œä¿®æ”¹ä¼šå½±å“åˆ°å…¶ä»–æ“ä½œï¼Œä¸æ–­åµŒå¥—çš„è¿‡ç¨‹å°±å¯¼è‡´äº†â€å›è°ƒåœ°ç‹±â€œçš„é—®é¢˜ã€‚ç”±æ­¤å¼•å‡ºäº† Promiseï¼Œé€šè¿‡ .then .... ç›´è§‚ä¸ŠåŒæ­¥çš„æ–¹å¼è§£å†³äº†åµŒå¥—é—®é¢˜ï¼Œä½†æ˜¯ç¨å¾®æœ‰ç‚¹ä¸å¥½çš„å°±æ˜¯éœ€è¦å°è£…å¤šä¸€å±‚ Promise å¯¹è±¡å¯¼è‡´è¯­ä¹‰ä¸æ¸…æ™°ã€‚</p><p>â­ Generator çš„å¼•å‡ºè§£å†³äº†ä¸Šé¢é—®é¢˜ï¼Œæœ¬è´¨ä¸ŠåŸºäºåç¨‹å®ç°ï¼Œå¯ä»¥æ§åˆ¶æ‰§è¡Œæ—¶æœºä¸”å†…éƒ¨ä»£ç çœ‹ä¸Šå»å’ŒåŒæ­¥çš„æ–¹å¼ä¸€æ¨¡ä¸€æ ·ï¼Œè¯­ä¹‰éå¸¸æ¸…æ™°ï¼ŒåŒæ—¶å¤–éƒ¨çš„é”™è¯¯å¯ä»¥åœ¨å†…éƒ¨è¿›è¡Œæ•è·ã€‚</p><ul><li>thunk åŒ…è£…</li></ul><div class="language-js"><pre><code><span class="token comment">// æœ¬è´¨ä¸Šæ˜¯é€šè¿‡å°† next ä½œä¸º fn çš„å›è°ƒå‡½æ•°ä¼ å…¥</span>
<span class="token comment">// ç­‰åˆ° fn æ‰§è¡Œå›è°ƒçš„æ—¶å€™å†æ¢å¤ Generator çš„æ‰§è¡Œæƒ</span>
<span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> gen <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token function">next</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#39;filename&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œé€šè¿‡è¿™ä¹ˆä¸€ç§æ–¹å¼æ¥æ¨¡æ‹Ÿ</span>
  <span class="token punctuation">}</span>

  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// thunk åŒ…è£…å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">thunk</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ¨¡æ‹Ÿè¯»å–æ–‡ä»¶çš„å¼‚æ­¥å›è°ƒ</span>
<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">filename<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    callbacl <span class="token operator">=</span> callback <span class="token operator">?</span> <span class="token function-variable function">callback</span> <span class="token operator">:</span>  <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token operator">=</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&#39;data&#39;</span> <span class="token punctuation">}</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> readFileThunk <span class="token operator">=</span> <span class="token function">thunk</span><span class="token punctuation">(</span>log<span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFileThunk</span><span class="token punctuation">(</span><span class="token string">&#39;file1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span>
  <span class="token keyword">var</span> f2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFileThunk</span><span class="token punctuation">(</span><span class="token string">&#39;file2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f2<span class="token punctuation">)</span>
  <span class="token keyword">var</span> f3 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFileThunk</span><span class="token punctuation">(</span><span class="token string">&#39;file3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f3<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">run</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ğŸ¯ å…¶å® CO çš„ promise å°è£…å’Œ run æ–¹æ³•æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯æ¢æˆäº† Promise.then çš„æ–¹å¼è¿›è¡Œå›è°ƒçš„ä¼ å…¥</p><h2 id="class-ç±»" tabindex="-1">Class ç±» <a class="header-anchor" href="#class-ç±»" aria-hidden="true">#</a></h2><p>å…¶å® Class æœ¬è´¨ä¸Šè¿˜æ˜¯ä½¿ç”¨å‡½æ•°å»å®ç°çš„ï¼ŒClass åªæ˜¯æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨çš„ä¸€ç§è¯­æ³•ç³–ï¼Œå¹¶ä¸æ˜¯åƒJava æˆ–è€… C é‡Œé¢å­˜åœ¨çœŸæ­£ç±»çš„å®šä¹‰ã€‚æ‰€ä»¥è¿˜æ˜¯å­˜åœ¨åŸå‹ &amp; åŸå‹é“¾çš„æ¦‚å¿µï¼Œè§„åˆ™å…¶å®ä¹Ÿå’Œ ES5 ä¸­æ˜¯ä¸€æ ·çš„ã€‚</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ„é€ å‡½æ•°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
<span class="token punctuation">}</span>
<span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸Šé¢çš„å£°æ˜ç­‰ä»·äº</span>
Class Point <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
    <span class="token punctuation">}</span>
    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ”‘ ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½åœ¨åŸå‹å¯¹è±¡ä¸Š</p><p>âš ï¸ é»˜è®¤æœ‰ä¸€ä¸ª constructor å‡½æ•°è¿”å› this å¯¹è±¡ï¼Œå¦‚æœæ›´æ”¹ä¸ºè¿”å›å…¶ä»–å¯¹è±¡ï¼Œå¯èƒ½å¯¼è‡´çš„é—®é¢˜æ˜¯ä¸èƒ½è¿›è¡Œå®ä¾‹ç»§æ‰¿å’ŒåŸå‹ç»§æ‰¿ã€‚</p><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// è¦†ç›–äº†åŸæ¥é»˜è®¤è¿”å› this çš„è¡Œä¸º</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre></div><div class="language-js"><pre><code>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼è·å–åŸå‹å¯¹è±¡</span>
</code></pre></div><h3 id="getter-setter" tabindex="-1">getter &amp; setter <a class="header-anchor" href="#getter-setter" aria-hidden="true">#</a></h3><ul><li>Object.getOwnPropertyDescriptor</li></ul><div class="language-js"><pre><code><span class="token comment">// Object.getOwnpropertyDescriptor ç”¨äºè·å–æŸä¸ªå±æ€§çš„æè¿°ç¬¦</span>
<span class="token comment">// ä¹Ÿå°±æ˜¯ { configurable, writable, enumerable, value }</span>
<span class="token comment">// åŒæ—¶ä¹Ÿè¯´æ˜äº†ä¸€ä¸ªé—®é¢˜ å¯¹åº”çš„ getter å’Œ setter æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šçš„</span>
<span class="token comment">// ä¸”è¿™ä¸ªå±æ€§æ˜¯ä¸å¯æšä¸¾çš„å› ä¸º Object.keys éå†ä¸å‡ºæ¥</span>
<span class="token keyword">var</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>
  <span class="token class-name">CustomHTMLElement</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">&quot;html&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ { configurable, writable, enumera }</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">CustomHTMLElement</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> <span class="token function">html</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomHTMLElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>cus<span class="token punctuation">.</span>__proto__<span class="token punctuation">,</span> <span class="token string">&#39;html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>cus<span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token string">&#39;html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// false </span>
</code></pre></div><h3 id="class-è¡¨è¾¾å¼" tabindex="-1">class è¡¨è¾¾å¼ <a class="header-anchor" href="#class-è¡¨è¾¾å¼" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">const</span> MyClass <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">Me</span> <span class="token punctuation">{</span>
  <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Me<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// Me åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ç«‹å³æ‰§è¡Œç±» =&gt; åˆ›å»ºå¯¹åº”çš„å®ä¾‹</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">class</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&#39;å¼ ä¸‰&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;å¼ ä¸‰&quot;</span>
</code></pre></div><h3 id="é™æ€æ–¹æ³•-é™æ€å±æ€§" tabindex="-1">é™æ€æ–¹æ³• &amp; é™æ€å±æ€§ <a class="header-anchor" href="#é™æ€æ–¹æ³•-é™æ€å±æ€§" aria-hidden="true">#</a></h3><p>âš ï¸ é™æ€å±æ€§å…¶å®ä¸€å¼€å§‹çš„è§„èŒƒä¸­æ˜¯å¦‚ä¸‹å£°æ˜çš„</p><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;name&#39;</span>
</code></pre></div><p>ä½†æ˜¯è€ƒè™‘åˆ°è¿™æ ·å­ä¸å¤ªç›´æ¥æ‰€ä»¥å°±å¼•å…¥äº†å¦ä¸€ç§è§„èŒƒ</p><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> name <span class="token operator">=</span> <span class="token string">&#39;name&#39;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å®ä¾‹å±æ€§çš„æ–°å†™æ³•" tabindex="-1">å®ä¾‹å±æ€§çš„æ–°å†™æ³• <a class="header-anchor" href="#å®ä¾‹å±æ€§çš„æ–°å†™æ³•" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>
    count <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// ç›´æ¥å£°æ˜åˆ°é¡¶éƒ¨</span>
    <span class="token comment">// ä½†æ˜¯ç”¨çš„æ—¶å€™å…¶å®è¿˜æ˜¯éœ€è¦ this.count</span>
    <span class="token comment">// åªæ˜¯è¯´ç°åœ¨ä¸€çœ¼å°±èƒ½çœ‹åˆ°æœ‰å“ªäº›å®ä¾‹å±æ€§</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="new-target" tabindex="-1">new.target <a class="header-anchor" href="#new-target" aria-hidden="true">#</a></h3><ul><li>åœ¨å‡½æ•°ä¸­ new Target æŒ‡å‘çš„æ˜¯æ„é€ å‡½æ•°</li></ul><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// [Person Function]</span>
</code></pre></div><ul><li>åœ¨å¯¹è±¡ä¸­è¿”å›çš„æ˜¯å½“å‰ Class</li></ul><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å‘ Class Person</span>
</code></pre></div><ul><li>åœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼ŒæŒ‡å‘çš„æ˜¯å­ç±»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸€ç‰¹æ€§æ¥å®ç°ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¹Ÿå°±æ˜¯åªèƒ½è¢«ç»§æ‰¿ä¸èƒ½è¢«å®ä¾‹</li></ul><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸èƒ½è¢«å®ä¾‹åŒ–&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="class-ç»§æ‰¿" tabindex="-1">Class ç»§æ‰¿ <a class="header-anchor" href="#class-ç»§æ‰¿" aria-hidden="true">#</a></h2><ul><li>ES6 ç»§æ‰¿æ–¹å¼å’Œ ES5 ç»§æ‰¿æ–¹å¼çš„å·®åˆ«</li></ul><p>ES6 çš„ç»§æ‰¿æœºåˆ¶ï¼Œæ˜¯å…ˆå°†çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ°ä¸€ä¸ªç©ºçš„å¯¹è±¡ä¸Šé¢ï¼Œç„¶åå†å°†è¯¥å¯¹è±¡ä½œä¸ºå­ç±»çš„å®ä¾‹ï¼Œå³â€œç»§æ‰¿åœ¨å‰ï¼Œå®ä¾‹åœ¨åâ€ï¼ŒES5 æ°æ°ç›¸åâ€œå®ä¾‹åœ¨å…ˆï¼Œç»§æ‰¿åœ¨åâ€ã€‚å› æ­¤å¼•å‡ºäº†ä¸€ç³»åˆ—çš„æ³¨æ„äº‹é¡¹ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»åŒ…å« super è°ƒç”¨ï¼Œthis çš„ä½¿ç”¨å¿…é¡»åœ¨ super åç­‰ç­‰ã€‚</p><h3 id="super" tabindex="-1">super <a class="header-anchor" href="#super" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°</span>
        <span class="token comment">// ç­‰ä»·äº A.prototype.constructor.call(this)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>super å¯ä»¥ç”¨ä½œå‡½æ•°å’Œå¯¹è±¡ã€‚ç”¨ä½œå‡½æ•°æ—¶åªèƒ½åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ï¼Œä¸”åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå†…éƒ¨é»˜è®¤çš„ this æŒ‡å‘æŒ‡å‘çš„æ˜¯å­ç±»çš„æ„é€ å‡½æ•°ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å­ç±»å®ä¾‹ã€‚ä½œä¸ºå¯¹è±¡ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœåœ¨æ™®é€šå‡½æ•°ä¸­ä½¿ç”¨ï¼Œ this æŒ‡å‘çš„æ˜¯çˆ¶ç±»åŸå‹å¯¹è±¡ï¼Œå¦‚æœåœ¨é™æ€å‡½æ•°ä¸­ä½¿ç”¨ï¼Œ this æŒ‡å‘çš„æ˜¯çˆ¶ç±»ã€‚</p></blockquote><ul><li>ES6 è§„å®šï¼Œåœ¨å­ç±»<em>æ™®é€šæ–¹æ³•</em>ä¸­é€šè¿‡ this è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„ this æŒ‡å‘å½“å‰çš„å­ç±»å®ä¾‹ã€‚</li></ul><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éµå¾ªä¸Šé¢çš„è§„å®š å®é™…æ‰§è¡Œçš„æ˜¯ super.print.call(this)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
</code></pre></div><ul><li>ES6 è§„å®šï¼Œåœ¨å­ç±»çš„é™æ€æ–¹æ³•ä¸­é€šè¿‡ super è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„ this æŒ‡å‘å½“å‰çš„å­ç±»ï¼Œè€Œä¸æ˜¯å­ç±»çš„å®ä¾‹ã€‚</li></ul><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// å®ä¾‹å±æ€§</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token constant">B</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// é™æ€å±æ€§</span>
<span class="token constant">B</span><span class="token punctuation">.</span><span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
</code></pre></div><p>âš ï¸ ä¸‹é¢è¿™æ®µä»£ç ä¸€ç›´ä¸èƒ½å¤Ÿç†è§£ï¼Ÿï¼Ÿï¼Ÿ</p><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  constru	<span class="token function">ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// èµ‹å€¼å’Œè¯»å–çš„æ“ä½œä¸ä¸€æ ·???</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åŸå‹é“¾" tabindex="-1">åŸå‹é“¾ <a class="header-anchor" href="#åŸå‹é“¾" aria-hidden="true">#</a></h3><p>æœ‰ä»¥ä¸‹è§„å¾‹</p><ol><li>å­ç±»çš„ _<em>proto_</em> å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»</li><li>å­ç±»çš„ prototype çš„ _<em>proto_</em> å±æ€§ï¼Œè¡¨ç¤ºåŸå‹æ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„ prototype å±æ€§</li></ol><div class="language-js"><pre><code><span class="token comment">// å…·ä½“çš„å®ç°æµç¨‹</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token constant">B</span><span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token constant">A</span> <span class="token comment">// true</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>

<span class="token comment">// B çš„å®ä¾‹ç»§æ‰¿ A çš„å®ä¾‹</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰ä»·äº B.prototype.__proto__ = A.prototype</span>

<span class="token comment">// B ç»§æ‰¿ A çš„é™æ€å±æ€§</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰ä»·äº B.__proto = A</span>

<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>å®ä¾‹å¯¹è±¡çš„åŸå‹é“¾</li></ul><p>â­ é¢è¯•çš„æ—¶å€™æœ‰é—®è¿™ä¹ˆä¸€ä¸ªé—®é¢˜</p><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// è¯·é—® c çš„åŸå‹é“¾æ˜¯æ€ä¹ˆç»§æ‰¿çš„</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ColorPoint</span> <span class="token keyword">extends</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ColorPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼ŒPoint å’Œ ColortPoint éƒ½æ˜¯ä½œä¸ºæ„é€ å‡½æ•°ç”Ÿæˆ p1 å’Œ p2</span>
<span class="token comment">// è‡ªç„¶ç¬¦åˆ ES5 ä¸­çš„ä¸€äº›è§„èŒƒè¦æ±‚</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">ColorPoint</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>  <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Point<span class="token punctuation">)</span> <span class="token comment">// &#39;function&#39;</span>
</code></pre></div><p>æ ¹æ®ä¸Šé¢çš„ä¸€äº›è¾“å‡ºï¼šå…¶å® Point å’Œ ColorPoint å°±æ˜¯æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å¯¹äº c æ¥è¯´ï¼Œc__proto__ === B.prototypeï¼Œè€Œ B.prototype === A.prototypeï¼Œè¿™å°±æ˜¯è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆ</p><h3 id="ç±»åˆå¹¶" tabindex="-1">ç±»åˆå¹¶ <a class="header-anchor" href="#ç±»åˆå¹¶" aria-hidden="true">#</a></h3><p>å¯ä»¥æŠ½å–å‡ºæ¥ä¸€ä¸ª mix å‡½æ•°ï¼Œå®ç°å¤šä¸ªç±»å®ä¾‹å±æ€§ / é™æ€å±æ€§çš„åˆå¹¶</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">mix</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>mixins</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">Mix</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> mixin <span class="token keyword">of</span> mixins<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">mixin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹·è´å®ä¾‹å±æ€§</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> mixin <span class="token keyword">of</span> mixins<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">copyProperties</span><span class="token punctuation">(</span>Mix<span class="token punctuation">,</span> mixin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹·è´é™æ€å±æ€§</span>
    <span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token class-name">Mix</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> mixin<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‹·è´åŸå‹å±æ€§</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> Mix<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">copyProperties</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> key <span class="token operator">!==</span> <span class="token string">&#39;constructor&#39;</span>
      <span class="token operator">&amp;&amp;</span> key <span class="token operator">!==</span> <span class="token string">&#39;prototype&#39;</span>
      <span class="token operator">&amp;&amp;</span> key <span class="token operator">!==</span> <span class="token string">&#39;name&#39;</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> desc <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…·ä½“ä½¿ç”¨çš„æ—¶å€™</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">mix</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// è¿™æ ·å°±å®ç°äº†ç»§æ‰¿å¤šä¸ªç±»äº†</span>
</code></pre></div><h2 id="iterator" tabindex="-1">Iterator <a class="header-anchor" href="#iterator" aria-hidden="true">#</a></h2><p>å…³é”®è¯ï¼šè®¿é—®æ¥å£ï¼›for...ofï¼›ç»“æ„åˆ†ç¦»</p><p>ç‰¹æ€§ / ä½œç”¨</p><ul><li>ä¸ºä¸åŒçš„æ•°æ®ç»“æ„æä¾›äº†ç»Ÿä¸€çš„è®¿é—®å½¢å¼</li><li>æ•°æ®ç»“æ„æˆå‘˜æŒ‰æŸç§æ¬¡åºæ’åˆ—</li><li>ä¸º for...of éå†æä¾›æ¥å£</li></ul><p>å°è£…æ•°æ®ç»“æ„è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œåˆå§‹æ—¶éå†å™¨æŒ‡é’ˆæŒ‡å‘ç»“æ„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸æ–­åœ°è°ƒç”¨ next æ–¹æ³•ï¼ŒæŒ‡é’ˆä¸æ–­åç§»ç›´è‡³ done ä¸º true ä»£è¡¨å½“å‰ç»“æ„çš„æ•°æ®å·²ç»è¢«è®¿é—®å®Œæˆã€‚</p><div class="language-js"><pre><code><span class="token comment">// æœ¬è´¨ä¸Šéƒ¨ç½²äº† Iterator æ¥å£å…¶å®æŒ‡çš„æ˜¯æœ‰ [Symbol.iterator]: function *() {} è¿™ä¸ªæ–¹æ³•</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
			<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// è¿”å›ä¸€ä¸ª next æ–¹æ³•ä½¿å¾—æŒ‡é’ˆå¯ä»¥å¾€åè¿­ä»£</span>
				<span class="token keyword">return</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‰ éƒ¨ç½²äº†è¿­ä»£å™¨æ¥å£ ----&gt; è¿”å›è¿­ä»£å™¨å¯¹è±¡ ----&gt; è°ƒç”¨ next æ–¹æ³• -----&gt; è¿”å›æ•°æ®ç»“æ„å­å…ƒç´ </p><ul><li>è¿­ä»£å™¨å®ç°é“¾è¡¨ç»“æ„</li></ul><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">Obj</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// éƒ¨ç½²æ¥å£</span>
<span class="token class-name">Obj</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> iterator <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">next</span><span class="token operator">:</span> next <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›è¿­ä»£å™¨å¯¹è±¡</span>

  <span class="token keyword">var</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åˆ¤æ–­ next æŒ‡å‘çš„æ˜¯å¦æ˜¯ null</span>
      <span class="token keyword">var</span> value <span class="token operator">=</span> current<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      current <span class="token operator">=</span> current<span class="token punctuation">.</span>next<span class="token punctuation">;</span> <span class="token comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªæŒ‡é’ˆ</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> iterator<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> one <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Obj</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> two <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Obj</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">var</span> three <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Obj</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
one<span class="token punctuation">.</span>next <span class="token operator">=</span> two<span class="token punctuation">;</span>
two<span class="token punctuation">.</span>next <span class="token operator">=</span> three<span class="token punctuation">;</span>

<span class="token comment">// åšäº†è¿™ä¹ˆä¸€ä»¶äº‹ { value, next: {value, next: {value, next}}  }</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">of</span> one<span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 2, 3</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="éƒ¨ç½²è¿­ä»£å™¨æ¥å£" tabindex="-1">éƒ¨ç½²è¿­ä»£å™¨æ¥å£ <a class="header-anchor" href="#éƒ¨ç½²è¿­ä»£å™¨æ¥å£" aria-hidden="true">#</a></h3><ul><li>å¯¹äºç±»æ•°ç»„å¯¹è±¡æ¥è¯´ï¼Œå¯ä»¥ç›´æ¥æ‹·è´ Array.prototype çš„è¿­ä»£å™¨æ¥å£</li></ul><p>âš ï¸ ç»è¿‡æµ‹è¯•ï¼Œå‡½æ•°çš„ arguments åˆ—è¡¨å±…ç„¶æ˜¯å¯ä»¥è¿­ä»£çš„(å¯èƒ½æ˜¯å†…ç½®äº†)</p><div class="language-js"><pre><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token operator">:</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// æ­£å¸¸æ¥è¯´æˆ‘ä»¬æ˜¯ä¸èƒ½é€šè¿‡ for...of éå†objçš„</span>
    <span class="token comment">// å› ä¸º obj æ²¡æœ‰éƒ¨ç½²è¿­ä»£å™¨æ¥å£</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> 
<span class="token punctuation">}</span>

<span class="token comment">// æ”¹æˆä¸‹é¢è¿™æ ·å­å°±å¯ä»¥äº†</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token operator">:</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>å¯¹äºæ™®é€šå¯¹è±¡æ¥è¯´ï¼Œéœ€è¦æ ¹æ®è‡ªå·±å®é™…çš„éœ€æ±‚æ¥å®šåˆ¶è¿­ä»£å™¨æ¥å£</li></ul><h3 id="è¦†ç›–é»˜è®¤è¿­ä»£å™¨" tabindex="-1">è¦†ç›–é»˜è®¤è¿­ä»£å™¨ <a class="header-anchor" href="#è¦†ç›–é»˜è®¤è¿­ä»£å™¨" aria-hidden="true">#</a></h3><ul><li>å¯¹äºå…·å¤‡è¿­ä»£å™¨æ¥å£çš„æ•°æ®ç»“æ„ï¼ˆå­—ç¬¦ä¸² / æ•°ç»„ / etcï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è¦†ç›–åŸæ¥çš„è¿­ä»£å™¨æ¥å£ï¼Œä»è€Œåœ¨ä¸æ”¹å˜åŸæ•°æ®çš„æƒ…å†µä¸‹æ›´æ”¹éå†çš„ç»“æœã€‚</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// è¦†ç›–åŸæ¥çš„è¿­ä»£å™¨</span>
    <span class="token keyword">let</span> _first <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">next</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">if</span><span class="token punctuation">(</span>_first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               _first <span class="token operator">=</span> <span class="token boolean">false</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;jzyismylover&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span>
                <span class="token punctuation">}</span>
           <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
               <span class="token keyword">return</span> <span class="token punctuation">{</span>
                   <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span>
               <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>  <span class="token comment">// åªä¼šè¾“å‡º jzyismylover</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// è¿˜æ˜¯åŸæ¥çš„[1, 2, 3]</span>
</code></pre></div><h3 id="éå†å™¨å¯¹è±¡çš„-returnã€throw" tabindex="-1">éå†å™¨å¯¹è±¡çš„ returnã€throw <a class="header-anchor" href="#éå†å™¨å¯¹è±¡çš„-returnã€throw" aria-hidden="true">#</a></h3><p>éå†å™¨å¯¹è±¡é™¤äº†æœ‰ next æ–¹æ³•ï¼Œè¿˜æœ‰ return å’Œ throw æ–¹æ³•ã€‚</p><ul><li>return ä¸»è¦ç”¨äºåœ¨ for...of å¾ªç¯ä¸­é‡åˆ° break / throw error çš„æ—¶å€™æ‰§è¡Œ { done: true } é€€å‡ºå½“å‰è¿­ä»£çŠ¶æ€</li></ul><div class="language-js"><pre><code><span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
a1<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token comment">// å…¶å®æ•°ç»„çš„ iterator æ¥å£å°±ç±»ä¼¼è¿™æ ·éƒ¨ç½²çš„</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                i<span class="token operator">++</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">value</span><span class="token operator">:</span> _this<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// å¦‚æœå®šä¹‰äº† return è¯­æ³•å°±å¿…é¡»è¿”å›ä¸€ä¸ª done: true</span>
            <span class="token comment">// å¦åˆ™ä¼šæŠ¥é”™ Iterator result undefined is not an object</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æå‰é€€å‡ºäº†&#39;</span><span class="token punctuation">)</span> <span class="token comment">// åœ¨ break æ“ä½œåè§¦å‘</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> a1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>item <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token comment">// 3 5</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="for-of-1" tabindex="-1">for...of <a class="header-anchor" href="#for-of-1" aria-hidden="true">#</a></h3><p>åªè¦éƒ¨ç½²äº†è¿­ä»£å™¨æ¥å£ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ for...of å¯¹æ•°æ®ç»“æ„è¿›è¡Œè®¿é—®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œfor...ofå¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„ Symbol.iterator æ–¹æ³•ã€‚å…¶å®ä¸Šé¢ä¹Ÿæœ‰å¾ˆå¤šä½¿ç”¨ for...of éå†çš„ä¾‹å­ï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œä¸»è¦è¿˜æ˜¯ä»é‡Œé¢çš„ä¸€äº›ç‰¹ä¾‹è¿›è¡Œåˆ†æã€‚</p><ol><li>æ•°ç»„</li></ol><div class="language-js"><pre><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;foo&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  &quot;3&quot;, &quot;5&quot;, &quot;7&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>âš ï¸ ä¹Ÿå°±æ˜¯è¯´ for...of éå†æ•°ç»„çš„æ—¶å€™åªä¼šéå†æ•°å­—é”®ï¼Œéæ•°å­—é”®ä¼šè¢«è·³è¿‡ã€‚é‚£å¦‚æœæˆ‘æŠŠ arr.foo æ”¹æˆ arr[&#39;3&#39;] ä¼šæœ‰å˜åŒ–å—ï¼Ÿå…¶å®æ˜¯ä¼šæœ‰çš„</p><div class="language-js"><pre><code>arr<span class="token punctuation">[</span><span class="token string">&#39;3&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  &quot;3&quot;, &quot;5&quot;, &quot;7&quot;, &quot;hello&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment">// å…¶å®åº”è¯¥æ˜¯å†…éƒ¨åšäº†ä¸€ä¸ª parseInt / Number çš„è½¬åŒ–ï¼Œç„¶åç”¨ isNaN å»åˆ¤æ–­</span>
</code></pre></div><ol start="2"><li>Map &amp; Set</li></ol><p>Map å’Œ Set éƒ½å¯ä»¥ä½¿ç”¨ for...of è¿›è¡Œè¿­ä»£éå†</p><div class="language-js"><pre><code><span class="token comment">// åŒºåˆ«åœ¨äº Set è¿­ä»£çš„æ˜¯å€¼ï¼ŒMap è¿­ä»£çš„æ˜¯é”®å’Œå€¼</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> Set<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> Map<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="for-in" tabindex="-1">for...in <a class="header-anchor" href="#for-in" aria-hidden="true">#</a></h3><p>for...in çš„ç¼ºé™·åœ¨äºå®ƒå°†æ‰€æœ‰çš„é”®éƒ½çœ‹æˆæ˜¯å­—ç¬¦ï¼Œæ‰€ä»¥ä¼šæŠŠæˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€äº›å±æ€§ä¹Ÿç»™éå†å‡ºæ¥ï¼Œä½†å…¶å®è¿™äº›å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå°±åƒä¸Šé¢ä¸¾çš„ä¸€ä¸ªæ•°ç»„ä¾‹å­ä¸€æ ·ï¼Œä¼šæŠŠ arr.foo = &#39;hello&#39; çš„ foo ä¹Ÿç»™éå†å‡ºæ¥ã€‚æ‰€ä»¥å…¶å® for...in æ›´é€‚åˆç”¨äºéå†å¯¹è±¡ï¼Œå› ä¸ºå¯¹è±¡å…¶å®ä¸éœ€è¦è€ƒè™‘éå†é¡ºåºçš„é—®é¢˜ã€‚</p><p>for... of çš„å¼•å‡ºå…¶å®å°±æ˜¯ä¸ºäº†ç»™å¼€å‘äººå‘˜æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£ï¼Œè§£å†³ä¼ ç»Ÿfor å¾ªç¯å¤æ‚ï¼ŒforEach æ— æ³•ä¸­é€”é€€å‡ºï¼Œfor...in å†—ä½™å±æ€§ç­‰ç­‰é—®é¢˜ã€‚</p><h2 id="async-å‡½æ•°" tabindex="-1">async å‡½æ•° <a class="header-anchor" href="#async-å‡½æ•°" aria-hidden="true">#</a></h2><p>async å‡½æ•°å…¶å®æ˜¯ Generator ç”Ÿæˆå™¨çš„è¯­æ³•ç³–</p><p>å…³é”®å­—ï¼šå†…ç½®æ‰§è¡Œå™¨ï¼›æ›´å¥½çš„è¯­ä¹‰ï¼›æ›´å¹¿çš„é€‚åº”æ€§ï¼›è¿”å›å€¼æ˜¯Promise</p><p>â­ async å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼ŒçŠ¶æ€å˜åŒ–çš„ç†è§£æ˜¯å…³é”®</p><ul><li><p>å†…éƒ¨çš„ return ä½œä¸º then å‡½æ•°æ¥æ”¶çš„å‚æ•°</p></li><li><p>å†…éƒ¨çš„ throw ç›´æ¥ä½œä¸º catch æ•è·çš„å‚æ•°</p></li><li><p>åªæœ‰å†…éƒ¨çš„ await å…¨éƒ¨æ‰§è¡Œå®Œæˆ–è€…é‡åˆ° return / æŠ¥é”™æ‰ä¼šæ›´æ–°è¿”å› Promise çš„çŠ¶æ€</p></li></ul><p>ğŸ”‘ éå¸¸é‡è¦</p><p>å†…éƒ¨æˆåŠŸæ‰§è¡Œå®Œæˆä½†æ—  return ---&gt; Promise.state === &#39;resolve&#39; -----&gt; then æ¥å— undefined</p><p>å†…éƒ¨æˆåŠŸæ‰§è¡Œå®Œæˆæœ‰ return ---&gt; Promise.state === &#39;resolve&#39; -------&gt; then æ¥å— return çš„å€¼</p><p>å†…éƒ¨æŠ›å‡º ------&gt; Promise.state === &#39;reject&#39; ---------&gt; catch æ¥å—æŠ¥é”™</p><div class="language-js"><pre><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token number">2</span>
  <span class="token comment">// return await 2 ç­‰åŒäº return 2</span>
<span class="token punctuation">}</span>
<span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;suc &#39;</span><span class="token operator">+</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// suc: undefined / suc: 2</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;err &#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token number">2</span>
  consoo
<span class="token punctuation">}</span>
<span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;suc &#39;</span><span class="token operator">+</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;err &#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// err: ReferenceError: consoo is not defined</span>
</code></pre></div><p>ğŸ”‘ é¢è¯•ä¸­é‡åˆ°çš„ä»£ç è€ƒæ ¸é¢˜</p><div class="language-js"><pre><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;async start&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token string">&#39;tesing&#39;</span> <span class="token comment">// åŒæ ·ä¼šè¢«æ³¨å†Œä¸ºå¾®ä»»åŠ¡ -- åªæ˜¯è¯´é©¬ä¸Šå°±ä¼šè¿›è¡Œç›¸å…³çŠ¶æ€å˜åŒ–</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resovle</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;haha&#39;</span><span class="token punctuation">)</span>
    <span class="token function">resovle</span><span class="token punctuation">(</span><span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token string">&#39;testing&#39;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script start&#39;</span><span class="token punctuation">)</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;script end&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// await &#39;testing&#39; æˆ‘ä»¬å¯ä»¥è¿™æ ·å»çœ‹</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;testing&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰§è¡Œåé¢çš„ä»£ç </span>
    <span class="token comment">// ä¹Ÿå°±è¯´è¯´åé¢çš„ä»£ç éƒ½ä¼šè¢«æ³¨å†Œä¸ºå¾®ä»»åŠ¡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="await" tabindex="-1">await <a class="header-anchor" href="#await" aria-hidden="true">#</a></h3><p>await åé¢å¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šéƒ¨ç½²äº† then æ–¹æ³• å’Œ æ²¡æœ‰éƒ¨ç½² then æ–¹æ³•</p><ol><li>æ²¡æœ‰éƒ¨ç½² then æ–¹æ³•</li></ol><div class="language-js"><pre><code><span class="token keyword">await</span> <span class="token number">1</span>
<span class="token keyword">await</span> <span class="token string">&#39;hello&#39;</span>
</code></pre></div><p>ä¸Šé¢è¿™äº›ä¼šç›´æ¥æ³¨å†Œå¾®ä»»åŠ¡å°†å‚æ•°ä¼ é€’è¿›å…¥ then ä¸­</p><ol start="2"><li>éƒ¨ç½²äº† then æ–¹æ³•ï¼ˆå®šä¹‰äº† then æ–¹æ³•çš„å¯¹è±¡ï¼‰</li></ol><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Sleep</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">timeout</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timeout <span class="token operator">=</span> timeout<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>timeout
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sleepTime <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾… then æ–¹æ³•æ‰§è¡Œå®Œæˆ</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sleepTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1000</span>
</code></pre></div><p>å¦‚æœæ˜¯ä¸Šé¢è¿™ç§æƒ…å†µçš„è¯ä¼šæ‰§è¡Œ promise çš„åŒæ­¥ä»£ç ï¼Œç„¶åè·³å‡ºå½“å‰æ‰§è¡Œå‡½æ•°ï¼Œç­‰åˆ°æ‰§è¡Œæ—¶æœºå›åˆ°å‡½æ•°åå†å°†å¯¹åº”çš„å¾®ä»»åŠ¡è¿›è¡Œæ³¨å†Œã€‚</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;thenable&#39;</span> <span class="token operator">+</span> res<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment">// thenable res</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æœ¬è´¨ä¸Šçš„åŸå› æ˜¯å› ä¸º then è¿”å›çš„ä¹Ÿæ˜¯ promiseï¼Œæ‰€ä»¥ await ä¹Ÿä¼šç­‰å¾… then è¿”å›çš„ Promise çŠ¶æ€å˜æ¢åå†å¾€ä¸Šæ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆéƒ¨ç½²äº† then æ–¹æ³•çš„å¯¹è±¡ä¼šè¢«è§†ä¸º Promise å¯¹è±¡ã€‚æ€»ç»“æ¥è¯´å°±æ˜¯ await è¿”å›çš„ç»“æœæ˜¯æœ€åä¸€ä¸ª Promise å¤„ç†æˆåŠŸçš„ç»“æœã€‚</p><p>âš ï¸ ä¸ºä»€ä¹ˆ async ä¸èƒ½ç”¨åœ¨ forEach ä¸­å‘¢ï¼Ÿ</p><div class="language-js"><pre><code>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// è¿™æ ·å­çš„æ–¹å¼ arr ä¸­çš„å…ƒç´ ä¼šåŒæ—¶è§¦å‘ä¹Ÿå°±æ˜¯ä¸ä¼šæŒ‰é¡ºåºè¿”å›å¯¹åº”çš„ç»“æœ</span>
</code></pre></div><h3 id="é”™è¯¯å¤„ç†" tabindex="-1">é”™è¯¯å¤„ç† <a class="header-anchor" href="#é”™è¯¯å¤„ç†" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;å‡ºé”™äº†&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// è¿›è¡Œ try...catch æ•è·</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span><span class="token punctuation">(</span><span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æˆ–è€…ä½¿ç”¨ then æ•è·</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;å‡ºé”™äº†&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">await</span><span class="token punctuation">(</span><span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å†…éƒ¨å®ç°" tabindex="-1">å†…éƒ¨å®ç° <a class="header-anchor" href="#å†…éƒ¨å®ç°" aria-hidden="true">#</a></h3><p>è¿è¡Œæµç¨‹</p><ol><li>æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°è¿”å›ç”Ÿæˆå™¨å¯¹è±¡</li><li>è°ƒç”¨ step æ–¹æ³•æ‰§è¡Œ next</li><li>é€šè¿‡ done: true / false åˆ¤æ–­å½“å‰æ˜¯å¦ç»“æŸ</li><li>ç»“æŸçš„è¯ç›´æ¥è¿”å›å¯¹åº”çš„ value</li><li>å¦åˆ™æ ¹æ® Promise çš„çŠ¶æ€ï¼šresolve æ‰§è¡Œä¸‹ä¸€ä¸ª next æ–¹æ³• / reject æ‰§è¡Œ throw æ–¹æ³•</li></ol><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token parameter">genF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token function">genF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ç”Ÿæˆç”Ÿæˆå™¨å¯¹è±¡</span>
        <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">nextF</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// éƒ¨ç½²è‡ªåŠ¨æ‰§è¡Œ Generator</span>
            <span class="token keyword">let</span> next
            <span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token comment">// éœ€è¦æ³¨æ„å¯¹åº” try...catch çš„æ•è·æ—¶æœº</span>
                <span class="token comment">// å…¶å®åªéœ€è¦æ•è· next = nextF()å³å¯</span>
                <span class="token comment">// å› ä¸ºè¿™é‡Œæ‰§è¡Œå¯èƒ½ generator.throw</span>
                next <span class="token operator">=</span> <span class="token function">nextF</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>next<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// æ‰§è¡Œå®Œæˆ</span>
                    <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// è¿˜å¯ä»¥å¾€ä¸‹æ‰§è¡Œçš„æ„æ€</span>
                Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> gen<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="modules" tabindex="-1">Modules <a class="header-anchor" href="#modules" aria-hidden="true">#</a></h2><p>â­ ES6 æ¨¡å—è®¾è®¡æ€æƒ³æ˜¯å°½é‡é™æ€åŒ–ï¼Œé™æ€åŒ–çš„æ„æ€å°±æ˜¯ä½¿å¾—åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ä»¥åŠè¾“å…¥è¾“å‡ºå˜é‡ã€‚</p><div class="language-js"><pre><code><span class="token comment">// ä»¥å‰ä½¿ç”¨ require å¯¼å…¥çš„æ—¶å€™</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>

<span class="token comment">/* æœ¬è´¨ä¸Šç­‰ä»·äº */</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
resolve <span class="token operator">=</span> fs<span class="token punctuation">.</span>resolve
</code></pre></div><p>â— ä¹Ÿå°±æ˜¯è¯´ CommonJS å¯¼å‡ºçš„å…¶å®æ˜¯ä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼Œç„¶åå†ä»å¯¹è±¡ä¸Šè¯»å–æ–¹æ³•è¿›è¡Œèµ‹å€¼ï¼Œæ‰€ä»¥åªæœ‰è¿è¡Œçš„æ—¶å€™æˆ‘ä»¬æ‰çŸ¥é“åŠ è½½äº†å“ªäº›æ–¹æ³•ï¼Œæ²¡æœ‰åŠæ³•åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œåˆ¤æ–­ã€‚</p><p>è€Œ ES6 ä½¿ç”¨ import / export å…³é”®å­—ï¼Œæœ¬è´¨ä¸Šå¯¼å‡ºçš„ä¸æ˜¯ä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼Œè€Œæ˜¯è¡¨è¾¾åŠ è½½çš„å«ä¹‰</p><div class="language-js"><pre><code><span class="token comment">// ä» fs ä¸ŠåŠ è½½ä¸‰ä¸ªå±æ€§/æ–¹æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> stat<span class="token punctuation">,</span> exists<span class="token punctuation">,</span> readFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;fs&#39;</span>
</code></pre></div><h3 id="export" tabindex="-1">export <a class="header-anchor" href="#export" aria-hidden="true">#</a></h3><p>ğŸ”‘ export å‘å¤–å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªæ¥å£</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">v1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">v2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

<span class="token comment">// æ¨èä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œå¯¼å‡º</span>
<span class="token comment">// å› ä¸ºæˆ‘ä»¬ä¸€çœ¼å°±èƒ½çœ‹åˆ°å¯¼å‡ºäº†å•¥</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
  v1 <span class="token keyword">as</span> streamV1<span class="token punctuation">,</span> <span class="token comment">// ä½¿ç”¨ as å…³é”®å­—è¿›è¡Œå¯¼å‡ºæ¨¡å—çš„é‡å‘½å</span>
  v2 <span class="token keyword">as</span> streamV2<span class="token punctuation">,</span>
  v2 <span class="token keyword">as</span> streamLatestVersion
<span class="token punctuation">}</span><span class="token punctuation">;</span>
               
<span class="token keyword">export</span> <span class="token number">1</span>  <span class="token comment">// Errorï¼šå¯¼å‡ºçš„æ˜¯æ¥å£ä¸æ˜¯å€¼</span>
</code></pre></div><h3 id="import" tabindex="-1">import <a class="header-anchor" href="#import" aria-hidden="true">#</a></h3><p>ğŸ”‘ import å¯¼å…¥çš„æ˜¯ export çš„æ¥å£ï¼Œæ‰€ä»¥å¯¹åº”çš„å±æ€§æœ€å¥½ä¸è¦ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯ read-only å°±å¥½ã€‚å’Œ export ä¸€æ ·ï¼Œimport åŒæ ·å­˜åœ¨ä½œç”¨åŸŸæå‡ï¼Œé»˜è®¤æå‡åˆ°å½“å‰å…¨å±€ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> streamV1 <span class="token keyword">as</span> stream<span class="token punctuation">,</span> streamV2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./test.js&#39;</span>
<span class="token comment">// å¯¼å…¥çš„åå­—å¿…é¡»ä¸ export ç›¸åŒ</span>
<span class="token comment">// å¯ä»¥ä½¿ç”¨ as å…³é”®å­—è¿›è¡Œé‡å‘½å</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token string">&#39;foo&#39;</span> <span class="token operator">+</span> a <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./test.js&#39;</span>
<span class="token comment">// Errorï¼šå› ä¸ºé™æ€ç¼–è¯‘çš„åŸå› ä¸å…è®¸é€šè¿‡è¡¨è¾¾å¼å»å¼•å…¥</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> moduleName <span class="token keyword">from</span> <span class="token string">&#39;./test.js&#39;</span> <span class="token comment">// æ¨¡å—æ•´ä½“å¯¼å‡ºé‡å‘½åä¸º moduleName</span>
moduleName<span class="token punctuation">.</span><span class="token function">getNaem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// é€šè¿‡ç±»ä¼¼è¿™æ ·çš„æ–¹å¼æ¥å®ç°è°ƒç”¨</span>
</code></pre></div><h3 id="export-default" tabindex="-1">export default <a class="header-anchor" href="#export-default" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> a

<span class="token comment">/* ç­‰ä»·äº */</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
	a <span class="token keyword">as</span> <span class="token keyword">default</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ”‘ å› æ­¤ä¸€ä¸ªæ¨¡å—å†…éƒ¨åªèƒ½ä½¿ç”¨ä¸€æ¬¡ export default, å¤šæ¬¡ä½¿ç”¨å°±ä¸çŸ¥é“æŠŠé‚£ä¸ªå˜é‡å‘½åä¸ºdefault å¯¼å‡ºã€‚export default å…¶å®æ˜¯ export çš„ç‰¹æ®Šæƒ…å†µï¼Œä»¥ default ä½œä¸ºé»˜è®¤æ¥å£å¯¼å‡º</p><div class="language-js"><pre><code><span class="token comment">/* å¯¼å‡º */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Â·Â·Â·</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">each</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> iterator<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Â·Â·Â·</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> each <span class="token keyword">as</span> forEach <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/* å¯¼å…¥ */</span>
<span class="token keyword">import</span> _<span class="token punctuation">,</span> <span class="token punctuation">{</span> each<span class="token punctuation">,</span> forEach <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸Šé¢æ˜¯å¾ˆå¤šåŒ…æ¨¡å—æ¯”è¾ƒå¸¸è§çš„å†™æ³• -- åŒæ—¶æ¥å— default æ¥å£å’Œå…¶ä»–æ¥å£çš„å¯¼å‡ºã€‚</p><p>â£ï¸ !!! ä»¥ä¸‹æ¦‚å¿µ åœ¨ vite çš„æ¨¡å—å¯¼å‡º(i<strong>mport.meta.globEager</strong>)éå¸¸é‡è¦</p><div class="language-js"><pre><code><span class="token comment">// index.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jzyismylover&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// main.js å¯¼å…¥</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">&#39;./index.js&#39;</span>
<span class="token comment">/*
{
	a: 1,
	default: { name: &#39;jzyismylover&#39; }
}
*/</span>
</code></pre></div><p>æœ¬è´¨ä¸Šå…¶å®æ˜¯ export default å¯¼å‡º default æ¥å£ å’Œ aæ¥å£ï¼Œä½†æ˜¯å†™åœ¨ä¸€èµ·çš„è¯ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“å»ç†è§£</p><h3 id="export-import-å¤åˆå†™æ³•" tabindex="-1">export &amp; import å¤åˆå†™æ³• <a class="header-anchor" href="#export-import-å¤åˆå†™æ³•" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">for</span><span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module&#39;</span>

<span class="token comment">/* ç­‰ä»·äº */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module&#39;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
	foo<span class="token punctuation">,</span>
    bar
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token punctuation">{</span> foo <span class="token keyword">as</span> <span class="token keyword">default</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module&#39;</span>

<span class="token comment">/* ç­‰ä»·äº */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> foo
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> foo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module&#39;</span>

<span class="token comment">/* ç­‰ä»·äº */</span>
<span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">&#39;module&#39;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
	foo
<span class="token punctuation">}</span>
</code></pre></div><p>â— ä½¿ç”¨ä¸Šé¢å¤åˆçš„å†™æ³•çš„è¯å†…éƒ¨æ˜¯æ— æ³•ä½¿ç”¨å¯¼å…¥çš„å˜é‡ï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ï¼ï¼ï¼</p><h3 id="è·¨æ¨¡å—å¸¸é‡" tabindex="-1">è·¨æ¨¡å—å¸¸é‡ <a class="header-anchor" href="#è·¨æ¨¡å—å¸¸é‡" aria-hidden="true">#</a></h3><p>ï¼ï¼ï¼å¦‚æœåœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°å¾ˆå¤šçš„å¸¸é‡ï¼Œæ¯”å¦‚è¯´è·¯ç”±ï¼Œæ¥å£åï¼Œèœå•åç­‰ç­‰ï¼ŒES6 é‡Œé¢æ¨èæˆ‘ä»¬å»ºä¸€ä¸ª constants çš„æ–‡ä»¶å¤¹æ¥å­˜å‚¨è¿™äº›å¸¸é‡ï¼Œå¹¶å°†ä¸åŒæ¨¡å—çš„å¸¸é‡æŠ½å–åˆ° index.js ä¸­ï¼Œæœ€åéœ€è¦å¯¼å…¥çš„æ—¶å€™ä» index.js é‡Œé¢å¯¼å…¥å³å¯ã€‚</p><div class="language-js"><pre><code><span class="token comment">// constants/menu.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> menu <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// constants/route.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// constants/index.js</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> menu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./menu.js&#39;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./route.js&#39;</span> 

<span class="token comment">// å¤–éƒ¨ä½¿ç”¨çš„æ—¶å€™</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> menu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;constants/index.js&#39;</span>
</code></pre></div><h3 id="import-1" tabindex="-1">import() <a class="header-anchor" href="#import-1" aria-hidden="true">#</a></h3><p>ğŸ”‘ æ˜¯ ES2020 æå‡ºçš„è¿è¡Œæ—¶åŠ è½½çš„æ‰‹æ®µï¼Œè¿”å›ä¸€ä¸ª promise. åœ¨ Vue ä¸­æ‡’åŠ è½½è·¯ç”±æœ‰è¿ç”¨åˆ°</p><div class="language-js"><pre><code><span class="token comment">// index.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jzyismylover&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./index&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/*
module: {
	a: &#39;1&#39;,
	default: { name: &#39;jzyismylover&#39; }
}
*/</span>
<span class="token comment">//---------------------------------</span>
<span class="token comment">/*
ä»…æœ‰ export default çš„æƒ…å†µ
module: {
	default: { name: &#39;jzyismylover&#39; }
}
*/</span>
<span class="token comment">//----------------------------------</span>
<span class="token comment">/*
ä»…æœ‰ export çš„æƒ…å†µ
module: {
	a: 1
}
*/</span>
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/yl/yl/" data-v-38ede35f><span class="text" data-v-38ede35f>vue</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"1cd71748\",\"yl_index.md\":\"9535c5af\",\"yl_learning.md\":\"d3490df1\"}")</script>
    <script type="module" async src="/yl/assets/app.a8623452.js"></script>
    
  </body>
</html>